/*!
 *  BMWUSA 
 *  Name: globalnav 
 * 
 */!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={41:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/etc/designs/bmwusa/bmwusa-clientlibs/";var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([36,0]),checkDeferredModules()}({"./frontend_src/bmwlib/utility/autocomplete-keyboard.js":function(module,exports,__webpack_require__){"use strict";var _defineProperty2=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")(__webpack_require__("./node_modules/@babel/runtime/helpers/defineProperty.js"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutocompleteKeyboard=void 0;exports.AutocompleteKeyboard=class AutocompleteKeyboard{constructor(){(0,_defineProperty2.default)(this,"count",-1),(0,_defineProperty2.default)(this,"reset",()=>{this.count=-1})}runKeyboardHighlights(settings={max:0,activeStr:"",resultItems:null,activeItem:null},dir=null){const{max,activeStr,resultItems,activeItem}=settings;let setItem=null;return"up"===dir?this.count--:"down"===dir&&this.count++,this.count>=max&&(this.count=0),0>this.count&&(this.count=max-1),activeItem&&activeItem.classList.remove(activeStr),setItem=resultItems[this.count],setItem.classList.add(""+activeStr),setItem}}},"./frontend_src/components/global-messaging/js/global-messaging.js":function(module,exports,__webpack_require__){"use strict";var _component=__webpack_require__("./frontend_src/bmwlib/component.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=new _component.Component({name:"Global Messaging Component",init(){window.GlobalMessage=(event,message)=>{this.relay(event,message)}},relay(event,message){PubSub.publish(event,message);const globalEvent=new CustomEvent(event,{detail:message});window.dispatchEvent(globalEvent)}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-drop-down-nav.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js"));var _default=new _component.Component({el:".globalnav-primary-drop-down-nav-holder",name:"globalnav-primary-drop-down-nav-holder Component",baseSrt:"globalnav-primary-drop-down-nav-holder",vehicleBaseStr:"globalnav-primary-vehicles__outer-shell",dropDownNavBase:"globalnav-primary-drop-down-nav",subscriptions:{"window.resizeEnd":"resizeEvt","primary.nav.close":"primaryClose","primary.nav.vehicleOpen":"vehicleOpenCheck","primary.nav-toggle":"dropDownToggle","primary.nav.open.mobile":"mobileSetup","my-bmw.open":"closeDropDown","search.open":"closeDropDown","dealer.open":"closeDropDown","fill.clicked":"closeDropDown"},adaFocusableItems:[".globalnav-primary__main-links button",".globalnav-primary__main-links a",".globalnav-primary__secondary-links button",".globalnav-primary__secondary-links a"],currentBreakpoint:1280<=window.innerWidth?"desktop":"mobile",vehicleHasRun:!1,init(){const mobileBackBtn=this.element.querySelectorAll(`.${this.dropDownNavBase}__back`);this.trapFocus=null,this.runVehicle=this.runVehicle.bind(this),this.toggleDropdown=this.toggleDropdown.bind(this),this.vehicleClose=this.vehicleClose.bind(this),this.closeMobile=this.closeMobile.bind(this),this.keycheck=this.keycheck.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.mainNavBar=document.querySelector(".globalnav-primary__nav"),this.tabsHolder=this.element.querySelector(".globalnav-primary-vehicles__tab-holder"),mobileBackBtn.forEach(element=>{element.addEventListener("click",this.closeMobile)}),this.element.addEventListener("keydown",this.closeWithKeyboard)},closeWithKeyboard(e){if(27===e.keyCode){this.closeDropDown();const button=document.querySelector(".globalnav-primary-drop-down--open-dropdown");button&&(document.querySelector(".globalnav-primary-drop-down--open-dropdown button").focus(),button.classList.remove("globalnav-primary-drop-down--open-dropdown"))}},primaryClose(){const elem=document.querySelector(".mobile--open-dropdown-mobile");elem&&(elem.classList.add("mobile--primary-close"),setTimeout(()=>{elem.classList.add("mobile--reset")},301),setTimeout(()=>{this.closeMobile(),elem.classList.remove("mobile--primary-close"),elem.classList.remove("mobile--reset")},405))},runVehicle(){this.vehicleHasRun||(this.vehicleHasRun=!0,this.vehicleSetUp()),"mobile"===this.currentBreakpoint?this.openMobile("vehicles"):this.vehicleOpen(),this.closeDropDown(!0,!1)},vehicleSetUp(){this.closeCornerBtnVehicles=document.querySelector(".globalnav-primary-vehicles__corner-close-button"),this.vehiclesContent=document.querySelector(".globalnav-primary-vehicles"),this.vehiclesCloseMobile=document.querySelector(".globalnav-primary-vehicles__header"),"desktop"===this.currentBreakpoint?this.vehicleDesktopEvt("on"):this.vehicleMobileEvt("on"),this.vehiclesContent.querySelectorAll("img[data-src]").forEach(img=>{img.setAttribute("src",img.dataset.src),img.onload=()=>{img.removeAttribute("data-src")}})},vehicleDesktopEvt(state){"on"===state?this.closeCornerBtnVehicles.addEventListener("click",this.vehicleClose):this.closeCornerBtnVehicles.removeEventListener("click",this.vehicleClose)},vehicleMobileEvt(state){"on"===state?this.vehiclesCloseMobile.addEventListener("click",this.closeMobile):this.vehiclesCloseMobile.removeEventListener("click",this.closeMobile)},vehicleOpenInitial(){const allModels=document.querySelector('.globalnav-primary-vehicles__tab[data-filter="all models"]');if(allModels.classList.contains("globalnav-primary-vehicles__tab--active")&&(allModels.querySelectorAll("a").forEach(element=>element.style.visibility="visible"),"mobile"===this.currentBreakpoint&&(this.element.querySelector(".globalnav-primary-vehicles__header > button").style.visibility="visible"),768>window.innerWidth)){this.element.querySelector(".globalnav-primary-vehicles__filter").querySelectorAll("button").forEach(element=>element.style.visibility="hidden")}},vehicleOpen(){const navItem=this.element.querySelector('div[data-flyout="vehicles"]');this.toggleScroll("on"),navItem.classList.add(this.vehicleBaseStr+"--active"),window.addEventListener("keydown",this.keycheck),document.querySelector(".globalnav-primary-drop-down-nav-holder .globalnav-primary-vehicles__outer-shell--active .globalnav-primary-vehicles").scrollTop=0,this.holderOpen();const vehicleContainer=document.querySelector(".globalnav-primary-vehicles");vehicleContainer.querySelector(".globalnav-primary-vehicles__header > button").style.visibility="hidden",this.trapFocus&&this.trapFocus.removeTrapEventListener(),_adaUtils.default.restrictFocus({container:navItem,dynamicContent:".globalnav-primary-vehicles"}),setTimeout(()=>{const activeElem=navItem.querySelector(".globalnav-primary-vehicles__filter-type--active");"electrified"!==activeElem.parentNode.getAttribute("data-child-filter")&&_adaUtils.default.restrictFocus({container:navItem.querySelector('.globalnav-primary-vehicles__tab[data-filter="electrified"]')}),this.trapFocus=_adaUtils.default.trapFocus(vehicleContainer),this.trapFocus.addTrapFocus(),activeElem.focus()},300)},vehicleClose(){const navItem=this.element.querySelector('div[data-flyout="vehicles"]');navItem.classList.contains(this.vehicleBaseStr+"--active")&&(navItem.classList.remove(this.vehicleBaseStr+"--active"),this.toggleScroll(),this.holderClose(),setTimeout(()=>{document.querySelector('.globalnav-primary__main-links.globalnav-primary-drop-down[data-flyout="vehicles"] button').focus(),PubSub.publish("nav.vehicle-close")},400),this.trapFocus.removeTrapEventListener(),window.removeEventListener("keydown",this.keycheck),_adaUtils.default.restrictFocus({container:this.mainNavBar,focusableItems:this.adaFocusableItems}),_adaUtils.default.restrictFocus({container:navItem}))},keycheck(e){(27===e.which||"Escape"===e.key)&&this.vehicleClose()},toggleDropdown(dropDown){const elem=this.element.querySelector(`div[data-flyout="${dropDown}"] .${this.dropDownNavBase}`),toggleElem="vehicles"===dropDown?void 0:document.querySelector(`li[data-flyout="${dropDown}"] > button`);elem.classList.contains(this.dropDownNavBase+"--open-dropdown")?(this.closeDropDown(),this.mainNavBar.removeEventListener("keydown",this.closeWithKeyboard)):(this.closeDropDown(!0),this.openDropDown(elem,toggleElem),this.mainNavBar.addEventListener("keydown",this.closeWithKeyboard))},toggleScroll(state="off"){"on"===state?document.body.classList.add("globalnav-primary--kill-scroll"):document.body.classList.remove("globalnav-primary--kill-scroll")},openDropDown(elem,toggleElem){this.toggleScroll("on"),this.holderOpen(),elem.classList.add(this.dropDownNavBase+"--open-dropdown"),this.toggleFill(!1,!0),setTimeout(()=>{this.trapFocus=_adaUtils.default.trapFocus(this.element.querySelector(`.${this.dropDownNavBase}--open-dropdown .${this.dropDownNavBase}__content`),toggleElem),this.trapFocus.addTrapFocus()},100)},closeDropDown(pass=!1,scrollChange=!0){const elem=this.element.querySelector(`.${this.dropDownNavBase}--open-dropdown`);("string"==typeof pass||scrollChange)&&this.toggleScroll(),elem&&(elem.classList.remove(this.dropDownNavBase+"--open-dropdown"),this.trapFocus.removeTrapEventListener(),!0!==pass&&this.holderClose(),this.toggleFill(!0))},holderClose(){setTimeout(()=>{this.element.classList.remove("globalnav-primary-drop-down-nav-holder--active")},350)},holderOpen(){this.element.classList.add("globalnav-primary-drop-down-nav-holder--active"),this.vehicleOpenInitial()},dropDownToggle(e,type){const open=type.toLowerCase();"vehicles"===open?this.runVehicle():this.toggleDropdown(open)},mobileSetup(e,type){const open=type.toLowerCase();"vehicles"===open?this.runVehicle(open):this.openMobile(open)},openMobile(type){const typeLow=type.toLowerCase(),selector="vehicles"===typeLow?"vehicles":"dropdown",elem=this.element.querySelector(`div[data-flyout="${typeLow}"] .${selector}`);this.holderOpen(),elem.classList.add("mobile--open-dropdown-mobile"),this.trapFocus&&this.trapFocus.removeTrapEventListener(),_adaUtils.default.restrictFocus({container:elem,dynamicContent:".globalnav-primary-vehicles"}),setTimeout(()=>{this.trapFocus=_adaUtils.default.trapFocus(elem),this.trapFocus.addTrapFocus()},300)},closeMobile(){const isActive=document.querySelector(".mobile--open-dropdown-mobile");isActive&&(PubSub.publish("mobile.dropDown.close"),isActive.classList.remove("mobile--open-dropdown-mobile"),this.holderClose(),this.trapFocus.removeTrapEventListener())},vehicleOpenCheck(){768>window.innerWidth?this.openMobile():this.vehicleOpen()},toggleFill(close=!1,open=!1){PubSub.publish("nav.toggleFill",{className:"globalnav-primary-fill--dropdown-open",close,open})},resizeEvt(e,resizeObj){"desktop"===this.currentBreakpoint&&1280>(null==resizeObj?void 0:resizeObj.width)?(this.currentBreakpoint="mobile",this.closeDropDown(),this.vehicleHasRun&&(this.vehicleClose(),this.vehicleDesktopEvt("off"),this.vehicleMobileEvt("on")),this.toggleScroll()):"mobile"===this.currentBreakpoint&&1280<=(null==resizeObj?void 0:resizeObj.width)&&(this.currentBreakpoint="desktop",this.closeMobile(),this.vehicleHasRun&&(this.vehicleClose(),this.vehicleDesktopEvt("on"),this.vehicleMobileEvt("off")),this.toggleScroll())}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-drop-down.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js"));var _default=new _component.Component({el:".globalnav-primary-drop-down",name:"globalnav-primary-drop-down Component",baseSrt:"globalnav-primary-drop-down",isRunning:!1,subscriptions:{"window.resizeEnd":"resizeEvt","search.open":"closeActiveState","dealer.open":"closeActiveState","my-bmw.open":"closeActiveState","fill.clicked":"closeActiveState","mobile.dropDown.close":"closeMobile"},currentBreakpoint:1280<=window.innerWidth?"desktop":"mobile",beforeInit(){this.mainNav=document.querySelector(".globalnav-primary__bar"),this.navToggle=this.navToggle.bind(this),this.openMobile=this.openMobile.bind(this)},init(){"mobile"===this.currentBreakpoint?(this.mobileEvt("on"),this.disableFocusableOnNav()):this.desktopEvt("on")},desktopEvt(state){"on"===state?this.element.addEventListener("click",this.navToggle):this.element.removeEventListener("click",this.navToggle)},mobileEvt(state){"on"===state?this.element.addEventListener("click",this.openMobile):this.element.removeEventListener("click",this.openMobile)},navToggle(e){const elem=e.currentTarget,navItem=elem.dataset.flyout,isActive=document.querySelector(this.el+"--open-dropdown"),flyoutEl=document.querySelector(`[data-flyout="${navItem}"]:not(.globalnav-primary__main-links):not(.globalnav-primary__secondary-links)`),dropDownEl=flyoutEl.querySelector(".globalnav-primary-drop-down-nav:not(.globalnav-primary__main-links):not(.globalnav-primary__secondary-links)"),firstLinkEl=flyoutEl.querySelector(".globalnav-primary-drop-down-nav__flyout-content a"),zipEl=flyoutEl.querySelector("#zip_code");PubSub.publish("primary.dropdown.toggle"),this.isRunning||"vehicles"===navItem?"vehicles"===navItem&&(this.checkState(elem,isActive),PubSub.publish("primary.nav-toggle",navItem)):(this.isRunning=!0,this.checkState(elem,isActive),elem.classList.toggle(this.baseSrt+"--open-dropdown"),PubSub.publish("primary.nav-toggle",navItem),setTimeout(()=>{dropDownEl.classList.contains("globalnav-primary-drop-down-nav--open-dropdown")&&(firstLinkEl?firstLinkEl.focus():zipEl?zipEl.focus():elem&&elem.focus()),this.isRunning=!1},400))},checkState(elem,active){!elem.classList.contains(this.baseSrt+"--open-dropdown")&&active&&this.closeActiveState()},closeActiveState(){const activeElem=document.querySelector(this.el+"--open-dropdown");activeElem&&activeElem.classList.remove(this.baseSrt+"--open-dropdown")},openMobile(e){this.mainNav.classList.add("globalnav-primary__bar--slide"),PubSub.publish("primary.nav.open.mobile",e.currentTarget.dataset.flyout)},closeMobile(){this.mainNav.classList.remove("globalnav-primary__bar--slide")},disableFocusableOnNav(){_adaUtils.default.restrictFocus({container:this.mainNav.querySelector(".globalnav-primary__nav")}),_adaUtils.default.restrictFocus({container:document.querySelector(".globalnav-primary-my-bmw")})},enableFocusableOnNav(){_adaUtils.default.restrictFocus({container:this.mainNav.querySelector(".globalnav-primary__nav"),focusableItems:[".globalnav-primary__main-links button",".globalnav-primary__main-links a",".globalnav-primary__secondary-links button",".globalnav-primary__secondary-links a"]}),_adaUtils.default.restrictFocus({container:document.querySelector(".globalnav-primary-my-bmw"),focusableItems:[".globalnav-primary-my-bmw__portal-holder a"]})},resizeEvt(e,resizeObj){"desktop"===this.currentBreakpoint&&1280>(null==resizeObj?void 0:resizeObj.width)?(this.currentBreakpoint="mobile",this.closeActiveState(),this.desktopEvt("off"),this.mobileEvt("on"),this.disableFocusableOnNav()):"mobile"===this.currentBreakpoint&&1280<=(null==resizeObj?void 0:resizeObj.width)&&(this.currentBreakpoint="desktop",this.closeActiveState(),this.desktopEvt("on"),this.mobileEvt("off"),this.enableFocusableOnNav())}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-fill.js":function(module,exports,__webpack_require__){"use strict";var _component=__webpack_require__("./frontend_src/bmwlib/component.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=new _component.Component({el:".globalnav-primary-fill",name:"globalnav-primary-fill Component",subscriptions:{"nav.toggleFill":"toggleFill"},fillIsOpen:!1,init(){this.element.addEventListener("touchmove",this.killScroll),this.element.addEventListener("click",this.close)},toggleFill(msg,data){data.close?(this.fillIsOpen=!1,this.element.classList.remove(data.className),data.top&&this.injectStyle("close",data)):data.open?(this.fillIsOpen=!0,this.element.classList.add(data.className),data.top&&this.injectStyle("open",data)):(this.fillIsOpen=!this.fillIsOpen,this.element.classList.toggle(data.className),data.top&&this.fillIsOpen?this.injectStyle("open",data):data.top&&this.injectStyle("close",data))},injectStyle(type,data){"open"===type?this.element.style.top=data.top+"px":setTimeout(()=>{this.element.style.top=""},301)},killScroll(e){e.preventDefault()},close(){PubSub.publish("fill.clicked")}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-location-bar.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_dealerInfo=__webpack_require__("./frontend_src/bmwlib/api-services/dealer-info.js");__webpack_require__("./frontend_src/components/global-messaging/js/global-messaging.js");var _default=new _component.Component({el:".globalnav-primary-location-bar",name:"globalnav-primary-location-bar Component",subscriptions:{"nav.toggleMyBMW":"toggleMyBMW","window.resizeEnd":"resizeEvt","zip.update":"setupData",dealerUpdate:"dealerUpdateHandler","dealer.update-bar":"dealerUpdateHandler","dealermap.component-embedded":"enableEmbeddedMap","dealermap.dealer-primary-toggle":"primaryToggleEvt","whereIWantForm.dealer.setGlobalFromForm":"setInfoFromForm",dealerUpdateFromCookie:"updateFromCookie","globalnav.embedded.dealerInfo":"updateFromCookie","dealermap.frombyo":"dealerBarClick"},currentBreakpoint:1280>window.innerWidth?"mobile":"desktop",baseStr:"globalnav-primary-location-bar",dealerData:{},embeddedMode:!1,beforeInit(){this.dealerData=null,this.location=this.element.querySelector(this.el+"__set-location"),this.dealerContent=this.element.querySelector(this.el+"__dealer-content"),this.dealerInfo=this.element.querySelector(this.el+"__dealer-info"),this.updateBar=this.updateBar.bind(this),this.dealerTemp=this.dealerTemp.bind(this),this.macoTemp=this.macoTemp.bind(this),this.dealerBarClick=this.dealerBarClick.bind(this),this.triggerMapDisplay=this.triggerMapDisplay.bind(this),this.updateFromCookie=this.updateFromCookie.bind(this),this.location.addEventListener("click",this.triggerMapDisplay),this.dealerContent.addEventListener("click",this.dealerBarClick)},init(){window.addEventListener("globalnav.embedded.dealerInfo",this.updateFromCookie),this.updateFromCookie(),this.pageLoad=!0},updateFromCookie(){_dealerInfo.DealerInfoApi.updateFromCookie().then(()=>{this.processDealerInfo()})},enableEmbeddedMap(){this.embeddedMode=!0},setInfoFromForm(e,ZipCode){(!this.dealerData||this.dealerData.dealer&&!this.dealerData.dealer.IsPrimary)&&_dealerInfo.DealerInfoApi.updateFromZip(ZipCode,null).then(()=>{this.processDealerInfo(!0)})},processDealerInfo(fromForm){this.dealerData=_dealerInfo.DealerInfoApi.getDealerInfo(),this.payload=_dealerInfo.DealerInfoApi.getDealerList(),this.dealerData.dealer&&this.dealerData.maco?(this.isPrimarySet=this.dealerData.dealer.IsPrimary,this.toggleBarDisplay(null,this.dealerData,fromForm),this.pageLoad&&(this.dealerData.pageLoad=!0),PubSub.publish("nav.dealerSet",this.dealerData)):this.isPrimarySet=!1,!this.payload&&this.dealerData&&(this.payload=this.dealerData.dealer)},setupData(e,data){this.dealerData={dealer:data.dealer,maco:data.maco},this.payload=data.payload,this.toggleBarDisplay(null,data)},toggleBarDisplay(e,data,fromForm){fromForm&&(data.dealer.IsPrimary=!1),this.hideDefaultLocationState(),this.updateBar(data),setTimeout(()=>{this.displayUpdate(),fromForm||document.querySelector(".what-i-want-inventory")||(this.pageLoad&&(data.dealer.pageLoad=!0,this.pageLoad=!1),PubSub.publish("nav.dealerSet",data.dealer))},360)},toggleMyBMW(){"desktop"!==this.currentBreakpoint&&(this.location.classList.toggle(this.baseStr+"__set-location--inactive"),this.dealerInfo.classList.toggle(this.baseStr+"__set-location--inactive"))},triggerMapDisplay(e){if(e.preventDefault(),e.currentTarget.blur(),this.embeddedMode){document.querySelector(".standalone-dealer-map").querySelector('input[name="location-search"]').focus()}else setTimeout(()=>{document.querySelector(".globalnav-map-popup__close-btn").focus()},500),PubSub.publish("dealermap.popover-open"),PubSub.publish("dealermap.search",!0)},showLocation(){this.location.classList.remove(this.baseStr+"__set-location--inactive")},dealerUpdateHandler(e,data){const isDefaultState=this.checkDefaultState();this.dataIsSet=!0,this.newPrimaryData?(this.dealerData=this.newPrimaryData,this.payload=this.dealerData.payload):(!this.isPrimarySet||this.isPrimarySet&&data.primaryToggle)&&(this.dealerData=data,this.payload=this.dealerData.payload),isDefaultState?this.updateBar(data):this.toggleBarDisplay(null,data),PubSub.publish("nav.dealerSet",data.dealer)},primaryToggleEvt(e,data){this.isPrimarySet=data.primary,this.newPrimaryData=!!this.isPrimarySet&&data},checkDefaultState(){const inActiveClass=this.baseStr+"__set-location--inactive";return this.location.classList.contains(inActiveClass)},updateBar(data){const{dealerContent,macoTemp,dealerTemp}=this,{IsPrimary}=data?data.dealer:null;let copy;(null==data?void 0:data.maco)&&(this.updateMacoLayer(data.maco),_dealerInfo.DealerInfoApi.setMaco(data.maco)),!IsPrimary&&data?(this.isPrimarySet=!1,copy=dealerContent.dataset.local,dealerContent.classList.remove(this.baseStr+"__set-flex"),dealerContent.innerHTML=`${macoTemp(data.maco)} ${dealerTemp(copy,data.dealer,!0)}`):(this.isPrimarySet=!0,copy=dealerContent.dataset.primary,dealerContent.classList.add(this.baseStr+"__set-flex"),dealerContent.innerHTML=""+dealerTemp(copy,data.dealer))},dealerTemp(copy,dealer,localDealer=!1){const{baseStr,dealerCharacterMax,getMaxCount,ellipse}=this,{Name,ZipCode}=dealer,currentDealerType=localDealer?"local-dealer":"primary-dealer";return`<div class="${baseStr}__dealer-buttons">\n          <span class="${this.baseStr}__dealer-${currentDealerType} label-2">${copy}</span>\n          <button class="${baseStr}__dealer-name label-2--bold">\n            <svg class="globalnav-primary-find-dealer__location-icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-nav-marker-header"></use>\n            </svg>${Name}\n          </button>\n          <button class="${baseStr}__dealer-edit" aria-label="Edit Dealer" tabindex = "-1" >\n            <svg class="${baseStr}__dealer-edit__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#icon-edit-pencil">\n            </svg>\n          </button>\n        </div>`},macoTemp(maco){let macoTemplate="";if("0000"!==maco.Code&&""!==maco.Code){const display=maco.Display?maco.Display:maco.MacoDisplay;maco.Url?maco.Url:maco.MacoUrl;macoTemplate=`<span class="${this.baseStr}__maco-link">\n          ${display}\n        </span>`}return macoTemplate},hideDefaultLocationState(){this.location.classList.add(this.baseStr+"__set-location--inactive"),setTimeout(()=>{this.location.classList.add(this.baseStr+"__set-location--hide")},350)},displayUpdate(){const{dealerInfo}=this;dealerInfo.classList.add(this.baseStr+"__dealer-info--display"),setTimeout(()=>{dealerInfo.classList.remove(this.baseStr+"__dealer-info--hide")},50),this.mobileDealerEditToggleFocusable()},dealerBarClick(e){var _e$target,_e$target2,_this$payload;(this.payload||(this.payload=_dealerInfo.DealerInfoApi.getDealerList()),e&&(null==e||null===(_e$target=e.target)||void 0===_e$target?void 0:_e$target.matches(`.${this.baseStr}__dealer-edit`)))?(this.embeddedMode||PubSub.publish("dealermap.popover-open"),0>=(null===(_this$payload=this.payload)||void 0===_this$payload?void 0:_this$payload.length)?PubSub.publish("dealermap.search"):PubSub.publish("dealermap.search-results",{Results:this.payload,Maco:this.dealerData.maco,newSearch:!0})):e&&(null==e||null===(_e$target2=e.target)||void 0===_e$target2?void 0:_e$target2.matches(`.${this.baseStr}__dealer-name`))&&(this.embeddedMode||PubSub.publish("dealermap.popover-open"),this.dealerData.dealer?PubSub.publish("dealermap.dealer-view",{dealer:[this.dealerData.dealer],payload:this.payload,newSearch:!0,Maco:this.dealerData.maco}):PubSub.publish("dealermap.search"))},mobileDealerEditToggleFocusable(){const dealerEditButton=this.element.querySelector(`.${this.baseStr}__dealer-edit`);dealerEditButton&&("mobile"!==this.currentBreakpoint&&"tablet"!==this.currentBreakpoint||!this.dealerInfo.classList.contains(this.baseStr+"__dealer-info--display")?dealerEditButton.tabIndex=-1:dealerEditButton.tabIndex=0)},resizeEvt(e,resizeObj){768>(null==resizeObj?void 0:resizeObj.width)&&"mobile"!==this.currentBreakpoint?(this.currentBreakpoint="mobile",this.dataIsSet&&this.updateBar(this.dealerData,!0)):768<=(null==resizeObj?void 0:resizeObj.width)&&1280>(null==resizeObj?void 0:resizeObj.width)&&"tablet"!==this.currentBreakpoint?(this.currentBreakpoint="tablet",this.dataIsSet&&this.updateBar(this.dealerData,!0)):1280<=(null==resizeObj?void 0:resizeObj.width)&&"desktop"!==this.currentBreakpoint&&(this.currentBreakpoint="desktop",this.showLocation(),this.dataIsSet&&this.updateBar(this.dealerData,!0)),this.mobileDealerEditToggleFocusable()},updateMacoLayer(data){this.maco={MacoDisplay:null,MacoCode:null,MacoName:null,MacoUrl:null},GlobalMessage&&(this.maco.MacoCode=data.MacoCode||data.Code,this.maco.MacoDisplay=data.MacoDisplay||data.Display,this.maco.MacoName=data.MacoName||data.Name,this.maco.MacoUrl=data.MacoUrl||data.Url,GlobalMessage("measure.globalnav.maco",this.maco))}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-micronav.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_primaryScrollEvent=_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-scroll-event.js"));var _default=new _component.Component({el:".globalnav",name:"micronav Component",isFixedActive:!1,isFixedOpenActive:!1,themeActive:!1,latestKnownScrollY:0,scrollEnd:!1,scrollActive:!1,scrollStart:!1,scroll:{latestKnownScrollY:0},scrollStartOffset:Number,scrollEndOffset:Number,originalNavHeight:Number,init(){var _this$globalNav,_this$globalNav2,_this$globalNav3,_this$globalNav4,_this$mainNav,_this$hamNav;const hasAttrbNavFixed=this.element.hasAttribute("data-has-local-nav"),hasMicronavActive=this.element.hasAttribute("data-has-micronav");hasAttrbNavFixed&&document.querySelector(".page").classList.add("hasLocalnavFixed"),hasMicronavActive&&document.querySelector("body").classList.add("hasMicronavActive"),this.scrollListener=new _primaryScrollEvent.default(100),this.globalNav=document.querySelector(".globalnav"),this.localNav=document.querySelector(".localnav"),this.fixedNav=document.querySelector(".primary--fixed"),this.mainNav=document.querySelector(".globalnav-primary"),this.hamNav=document.querySelector(".globalnav-primary-dealer__mobile-nav-btn"),this.fixedLocalNav=document.querySelector(".globalnav-local__fixed-shell"),this.globalNavHeight=this.mainNav.offsetHeight,this.triggerMicronavPoint=this.mainNav.offsetHeight,this.navEvt=this.navEvt.bind(this),this.pinNav=this.pinNav.bind(this),this.openMicronav=this.openMicronav.bind(this),this.setMicronavStated=this.setMicronavStated.bind(this),this.scrollToTopPart=this.scrollToTopPart.bind(this),this.controlTransition=this.controlTransition.bind(this),null!==(_this$globalNav=this.globalNav)&&void 0!==_this$globalNav&&_this$globalNav.hasAttribute("data-has-local-nav")||!(null===(_this$globalNav2=this.globalNav)||void 0===_this$globalNav2?void 0:_this$globalNav2.hasAttribute("data-has-micronav"))?(null===(_this$globalNav3=this.globalNav)||void 0===_this$globalNav3?void 0:_this$globalNav3.hasAttribute("data-has-local-nav"))&&(null===(_this$globalNav4=this.globalNav)||void 0===_this$globalNav4?void 0:_this$globalNav4.hasAttribute("data-has-micronav"))&&(this.triggerMicronavPoint=this.mainNav.offsetHeight+this.localNav.offsetHeight,this.navEvt(),this.scrollStateListener()):(this.navEvt(),this.scrollStateListener()),null===(_this$mainNav=this.mainNav)||void 0===_this$mainNav||_this$mainNav.addEventListener("click",()=>{this.mouseClickedOpenMicronav()},!0),null===(_this$hamNav=this.hamNav)||void 0===_this$hamNav||_this$hamNav.addEventListener("click",()=>{this.mouseClickedOpenMicronav()},!0)},navEvt(){window.addEventListener("scroll",this.pinNav),window.addEventListener("scroll",this.controlTransition),window.pageYOffset>this.triggerMicronavPoint&&this.setMicronavStated(),this.hamNav.addEventListener("click",this.openMicronav)},controlTransition(){if(window.scrollY<this.scroll.latestKnownScrollY){var _this$globalNav5,_this$mainNav2,_this$globalNav6;if((null===(_this$globalNav5=this.globalNav)||void 0===_this$globalNav5?void 0:_this$globalNav5.hasAttribute("data-has-local-nav"))?window.scrollY<this.triggerMicronavPoint&&(this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.add("instant-open"),this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("cancel-localnav-down"),this.localNav.classList.add("instant-open")):101>window.scrollY&&(this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.add("instant-open")),this.mainNav.classList.contains("micronav-down-running"))this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.add("cancel-micronav-down"),(null===(_this$globalNav6=this.globalNav)||void 0===_this$globalNav6?void 0:_this$globalNav6.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("top-position"),this.localNav.classList.add("cancel-localnav-down"));null===(_this$mainNav2=this.mainNav)||void 0===_this$mainNav2||_this$mainNav2.classList.remove("micronav-down")}else{var _this$globalNav8,_this$globalNav7;if(this.mainNav.classList.contains("cancel-micronav-down"))this.mainNav.classList.remove("cancel-micronav-down"),(null===(_this$globalNav7=this.globalNav)||void 0===_this$globalNav7?void 0:_this$globalNav7.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.add("cancel-localnav-down"),this.localNav.classList.remove("top-position"));(null===(_this$globalNav8=this.globalNav)||void 0===_this$globalNav8?void 0:_this$globalNav8.hasAttribute("data-has-local-nav"))?window.scrollY>=this.triggerMicronavPoint&&this.mainNav.classList.contains("instant-open")&&(this.mainNav.classList.remove("instant-open"),this.localNav.classList.remove("instant-open")):101<=window.scrollY&&this.mainNav.classList.contains("instant-open")&&this.mainNav.classList.remove("instant-open")}this.scroll.latestKnownScrollY=window.scrollY},setMicronavStated(){var _this$globalNav9,_this$globalNav10;window.pageYOffset>this.triggerMicronavPoint&&window.pageYOffset>this.latestKnownScrollY&&!this.isFixedActive&&(this.mainNav.classList.add("micronav-down"),this.mainNav.classList.add("micronav-down-running"),(null===(_this$globalNav9=this.globalNav)||void 0===_this$globalNav9?void 0:_this$globalNav9.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.add("localnav-down"),this.localNav.classList.add("localnav-down-running")),this.contractMicronav(),this.animationWatcher(),this.isFixedOpenActive=!1);window.pageYOffset>this.triggerMicronavPoint&&window.pageYOffset>this.latestKnownScrollY&&this.isFixedOpenActive&&(this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.add("micronav-closing"),(null===(_this$globalNav10=this.globalNav)||void 0===_this$globalNav10?void 0:_this$globalNav10.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.remove("localnav-down"),this.localnavMovesUp()),this.contractMicronav());window.pageYOffset<this.latestKnownScrollY&&window.pageYOffset>this.globalNavHeight&&this.isFixedActive&&!this.isFixedOpenActive&&(this.localnavMovesDown(),this.openMicronav()),this.latestKnownScrollY=window.pageYOffset},clearMicronavFixed(){var _this$globalNav11;this.mainNav.classList.remove("micronav-closing"),this.mainNav.classList.remove("primary-contracted"),this.mainNav.classList.remove("primary--fixed--open"),this.mainNav.classList.remove("primary--fixed"),this.globalNav.classList.remove("gn-height-placeholder"),this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.remove("micronav-down-running"),this.mainNav.classList.remove("cancel-micronav-down"),this.mainNav.classList.remove("instant-open"),(null===(_this$globalNav11=this.globalNav)||void 0===_this$globalNav11?void 0:_this$globalNav11.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.remove("micronav-moves-localnav-down"),this.localNav.classList.remove("localnav-down-running"),this.localNav.classList.remove("cancel-localnav-down"),this.localNav.classList.remove("instant-open")),this.isFixedActive=!1,this.isFixedOpenActive=!1,this.latestKnownScrollY=window.pageYOffset},openMicronav(){var _this$globalNav12;this.mainNav.classList.add("primary--fixed--open"),this.mainNav.classList.remove("primary-contracted"),this.mainNav.classList.remove("micronav-closing"),document.querySelector("body").classList.add("microNavOpen"),(null===(_this$globalNav12=this.globalNav)||void 0===_this$globalNav12?void 0:_this$globalNav12.hasAttribute("data-has-local-nav"))&&this.localNav.classList.remove("micronav-moves-localnav-up"),this.isFixedActive=!0,this.isFixedOpenActive=!0,document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--globalnav-primary-height"))},localnavMovesDown(){var _this$globalNav13;(null===(_this$globalNav13=this.globalNav)||void 0===_this$globalNav13?void 0:_this$globalNav13.hasAttribute("data-has-local-nav"))&&(this.fixedLocalNav.style.top="",this.localNav.classList.remove("localnav-down"),this.localNav.classList.remove("micronav-moves-localnav-up"),this.localNav.classList.add("micronav-moves-localnav-down"))},localnavMovesUp(){var _this$globalNav14;(null===(_this$globalNav14=this.globalNav)||void 0===_this$globalNav14?void 0:_this$globalNav14.hasAttribute("data-has-local-nav"))&&(this.localNav.classList.remove("micronav-moves-localnav-down"),this.localNav.classList.add("micronav-moves-localnav-up"))},contractMicronav(){this.mainNav.classList.add("primary-contracted"),this.mainNav.classList.add("primary--fixed"),this.globalNav.classList.add("gn-height-placeholder"),this.mainNav.classList.remove("primary--fixed--open"),document.querySelector("body").classList.remove("microNavOpen"),this.localnavMovesUp(),this.isFixedActive=!0,this.isFixedOpenActive=!1,document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--contracted-nav-height"))},animationWatcher(){var _this$globalNav16;this.mainNav.onanimationend=event=>{var _this$globalNav15;"micronavDown"===event.animationName&&(this.mainNav.classList.remove("micronav-down-running"),(null===(_this$globalNav15=this.globalNav)||void 0===_this$globalNav15?void 0:_this$globalNav15.hasAttribute("data-has-local-nav"))&&this.localNav.classList.remove("localnav-down-running"))},(null===(_this$globalNav16=this.globalNav)||void 0===_this$globalNav16?void 0:_this$globalNav16.hasAttribute("data-has-local-nav"))&&(this.localNav.onanimationstart=event=>{"localnavDown"===event.animationName&&this.localNav.classList.add("top-position")},this.localNav.onanimationend=event=>{"localnavDown"===event.animationName&&this.localNav.classList.remove("top-position")})},pinNav(){1280<=window.innerWidth&&this.setMicronavStated()},scrollToTopPart(){0==window.pageYOffset&&this.isFixedActive&&this.clearMicronavFixed()},scrollStateListener(){this.scrollListener.addEventListener("start",()=>{this.scrollStartOffset=window.pageYOffset,this.scrollStart=!0,this.scrollActive=!1,this.scrollEnd=!1}),this.scrollListener.addEventListener("scroll",()=>{this.scrollStart=!1,this.scrollActive=!0,this.scrollEnd=!1}),this.scrollListener.addEventListener("end",()=>{this.scrollEndOffset=window.pageYOffset,this.scrollStart=!1,this.scrollActive=!1,this.scrollEnd=!0,this.scrollEnd&&this.scrollToTopPart()})},mouseClickedOpenMicronav(){this.isFixedActive&&!this.isFixedOpenActive&&(this.localnavMovesDown(),this.openMicronav(),this.mainNav.addEventListener("mouseleave",()=>{this.isFixedActive&&this.isFixedOpenActive&&setTimeout(()=>{this.mainNav.classList.remove("micronav-down"),this.mainNav.classList.add("micronav-closing"),this.contractMicronav()},230)},{once:!0}))},cssVar:(varname,value)=>("-"!=varname[0]&&(varname="--"+varname),value&&document.documentElement.style.setProperty(varname,value),getComputedStyle(document.documentElement).getPropertyValue(varname))});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-my-bmw.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_myBmwLoggedinTemplate=_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/templates/my-bmw-loggedin-template.js")),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js")),_profileLinksConf=_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/profileLinks-conf.js"));var _default=new _component.Component({el:".globalnav-primary-my-bmw",name:"globalnav-primary-my-bmw Component",currentBreakpoint:1280>window.innerWidth?"mobile":"desktop",baseStr:"globalnav-primary-my-bmw",subscriptions:{"window.resizeEnd":"resizeEvt","nav.toggleMyBMW":"toggleMyBMW","fill.clicked":"closeProfile","dealer.open":"closeProfile","search.open":"closeProfile","primary.nav-toggle":"closeProfile"},sessionData:{},init(){var _window,_window$bmwClientSide,_window$bmwClientSide2,_window$bmwClientSide3;this.myBMW=this.element;const loggedIn=sessionStorage.getItem("User_Data");("enabled"===(null===(_window=window)||void 0===_window||null===(_window$bmwClientSide=_window.bmwClientSideConfigurations)||void 0===_window$bmwClientSide||null===(_window$bmwClientSide2=_window$bmwClientSide.featureFlags)||void 0===_window$bmwClientSide2||null===(_window$bmwClientSide3=_window$bmwClientSide2.mybmwLinkStatus)||void 0===_window$bmwClientSide3?void 0:_window$bmwClientSide3.toLowerCase())||loggedIn)&&(_component.$dom.removeClass(this.myBMW,"disabled"),this.profileBtn=this.element.querySelector(this.el+"__profile-btn"),this.dealer=document.querySelector(".globalnav-primary-dealer__bar"),this.profileElem=document.querySelector(`.${this.baseStr}__profile-dropdown`),this.toggleProfile=this.toggleProfile.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.profileElem.addEventListener("keydown",this.closeWithKeyboard),loggedIn&&(this.sessionData=JSON.parse(loggedIn),this.profileBtn&&this.profileBtn.addEventListener("click",this.toggleProfile)),this.toggleLoggedInState(loggedIn))},toggleProfile(){this.myBMW.classList.contains(this.baseStr+"--dropdown-active")?(this.toggleFill(!0),window.removeEventListener("scroll",this.toggleProfile),"desktop"!==this.currentBreakpoint&&setTimeout(()=>{this.dealer.classList.remove("overflow__visible")},450),this.profileBtn.focus()):(PubSub.publish("my-bmw.open"),this.toggleFill(!1,!0),"desktop"===this.currentBreakpoint?window.addEventListener("scroll",this.toggleProfile):this.dealer.classList.add("overflow__visible"),this.profileElem.querySelector(".globalnav-primary-my-bmw__profile-list a").focus(),this.trapFocus=_adaUtils.default.trapFocus(this.profileElem),this.trapFocus.addTrapFocus()),this.myBMW.classList.toggle(this.baseStr+"--dropdown-active"),this.profileElem.classList.toggle(this.baseStr+"--dropdown-active")},closeProfile(){this.myBMW.classList.contains(this.baseStr+"--dropdown-active")&&(this.myBMW.classList.remove(this.baseStr+"--dropdown-active"),this.profileElem.classList.remove(this.baseStr+"--dropdown-active"),this.profileBtn.focus(),this.toggleFill(!0))},toggleLoggedInState(loggedIn){loggedIn&&(this.myBMW.classList.toggle(this.baseStr+"--logged-in"),this.populateLoggedInDropDown())},populateLoggedInDropDown(){const isTest=-1<window.location.href.indexOf("test-mygarage")||-1<window.location.href.indexOf("uat"),urlData=_profileLinksConf.default;var _window2,_window2$bmwClientSid,_window2$bmwClientSid2,_window2$bmwClientSid3,_window3,_window3$bmwClientSid,_window3$bmwClientSid2,_window3$bmwClientSid3,_window4,_window4$bmwClientSid,_window4$bmwClientSid2,_window4$bmwClientSid3,_window5,_window5$bmwClientSid,_window5$bmwClientSid2,_window5$bmwClientSid3,_window6,_window6$bmwClientSid,_window6$bmwClientSid2,_window6$bmwClientSid3,_window7,_window7$bmwClientSid,_window7$bmwClientSid2,_window7$bmwClientSid3,_window8,_window8$bmwClientSid,_window8$bmwClientSid2,_window9,_window9$bmwClientSid,_window9$bmwClientSid2,_window10,_window10$bmwClientSi,_window10$bmwClientSi2,_window11,_window11$bmwClientSi,_window11$bmwClientSi2,_window12,_window12$bmwClientSi,_window12$bmwClientSi2,_window13,_window13$bmwClientSi,_window13$bmwClientSi2;isTest?(urlData.home.url=null===(_window2=window)||void 0===_window2||null===(_window2$bmwClientSid=_window2.bmwClientSideConfigurations)||void 0===_window2$bmwClientSid||null===(_window2$bmwClientSid2=_window2$bmwClientSid.endpoints)||void 0===_window2$bmwClientSid2||null===(_window2$bmwClientSid3=_window2$bmwClientSid2.myBMWTesting)||void 0===_window2$bmwClientSid3?void 0:_window2$bmwClientSid3.myBmwHomeUrl,urlData.myGarage.url=null===(_window3=window)||void 0===_window3||null===(_window3$bmwClientSid=_window3.bmwClientSideConfigurations)||void 0===_window3$bmwClientSid||null===(_window3$bmwClientSid2=_window3$bmwClientSid.endpoints)||void 0===_window3$bmwClientSid2||null===(_window3$bmwClientSid3=_window3$bmwClientSid2.myBMWTesting)||void 0===_window3$bmwClientSid3?void 0:_window3$bmwClientSid3.myBmwMyGarageUrl,urlData.myAccount.url=null===(_window4=window)||void 0===_window4||null===(_window4$bmwClientSid=_window4.bmwClientSideConfigurations)||void 0===_window4$bmwClientSid||null===(_window4$bmwClientSid2=_window4$bmwClientSid.endpoints)||void 0===_window4$bmwClientSid2||null===(_window4$bmwClientSid3=_window4$bmwClientSid2.myBMWTesting)||void 0===_window4$bmwClientSid3?void 0:_window4$bmwClientSid3.myBmwMyAccountUrl,urlData.myProfile.url=null===(_window5=window)||void 0===_window5||null===(_window5$bmwClientSid=_window5.bmwClientSideConfigurations)||void 0===_window5$bmwClientSid||null===(_window5$bmwClientSid2=_window5$bmwClientSid.endpoints)||void 0===_window5$bmwClientSid2||null===(_window5$bmwClientSid3=_window5$bmwClientSid2.myBMWTesting)||void 0===_window5$bmwClientSid3?void 0:_window5$bmwClientSid3.myBmwMyProfileUrl,urlData.bmwLogin.url=null===(_window6=window)||void 0===_window6||null===(_window6$bmwClientSid=_window6.bmwClientSideConfigurations)||void 0===_window6$bmwClientSid||null===(_window6$bmwClientSid2=_window6$bmwClientSid.endpoints)||void 0===_window6$bmwClientSid2||null===(_window6$bmwClientSid3=_window6$bmwClientSid2.myBMWTesting)||void 0===_window6$bmwClientSid3?void 0:_window6$bmwClientSid3.myBmwBmwLoginUrl,urlData.logOutMyBMW.url=null===(_window7=window)||void 0===_window7||null===(_window7$bmwClientSid=_window7.bmwClientSideConfigurations)||void 0===_window7$bmwClientSid||null===(_window7$bmwClientSid2=_window7$bmwClientSid.endpoints)||void 0===_window7$bmwClientSid2||null===(_window7$bmwClientSid3=_window7$bmwClientSid2.myBMWTesting)||void 0===_window7$bmwClientSid3?void 0:_window7$bmwClientSid3.myBmwLogOutUrl):(urlData.home.url=null===(_window8=window)||void 0===_window8||null===(_window8$bmwClientSid=_window8.bmwClientSideConfigurations)||void 0===_window8$bmwClientSid||null===(_window8$bmwClientSid2=_window8$bmwClientSid.endpoints)||void 0===_window8$bmwClientSid2?void 0:_window8$bmwClientSid2.myBmwHomeUrl,urlData.myGarage.url=null===(_window9=window)||void 0===_window9||null===(_window9$bmwClientSid=_window9.bmwClientSideConfigurations)||void 0===_window9$bmwClientSid||null===(_window9$bmwClientSid2=_window9$bmwClientSid.endpoints)||void 0===_window9$bmwClientSid2?void 0:_window9$bmwClientSid2.myBmwMyGarageUrl,urlData.myAccount.url=null===(_window10=window)||void 0===_window10||null===(_window10$bmwClientSi=_window10.bmwClientSideConfigurations)||void 0===_window10$bmwClientSi||null===(_window10$bmwClientSi2=_window10$bmwClientSi.endpoints)||void 0===_window10$bmwClientSi2?void 0:_window10$bmwClientSi2.myBmwMyAccountUrl,urlData.myProfile.url=null===(_window11=window)||void 0===_window11||null===(_window11$bmwClientSi=_window11.bmwClientSideConfigurations)||void 0===_window11$bmwClientSi||null===(_window11$bmwClientSi2=_window11$bmwClientSi.endpoints)||void 0===_window11$bmwClientSi2?void 0:_window11$bmwClientSi2.myBmwMyProfileUrl,urlData.bmwLogin.url=null===(_window12=window)||void 0===_window12||null===(_window12$bmwClientSi=_window12.bmwClientSideConfigurations)||void 0===_window12$bmwClientSi||null===(_window12$bmwClientSi2=_window12$bmwClientSi.endpoints)||void 0===_window12$bmwClientSi2?void 0:_window12$bmwClientSi2.myBmwBmwLoginUrl,urlData.logOutMyBMW.url=null===(_window13=window)||void 0===_window13||null===(_window13$bmwClientSi=_window13.bmwClientSideConfigurations)||void 0===_window13$bmwClientSi||null===(_window13$bmwClientSi2=_window13$bmwClientSi.endpoints)||void 0===_window13$bmwClientSi2?void 0:_window13$bmwClientSi2.myBmwLogOutUrl);const dropdownTemp=(0,_myBmwLoggedinTemplate.default)(this.sessionData,urlData);this.profileElem.innerHTML=dropdownTemp,document.querySelectorAll(".globalnav-primary-my-bmw__profile-list a").forEach((function(e){e.href===location.href&&e.classList.add("mybmw-active-link")}))},toggleMyBMW(){"desktop"!==this.currentBreakpoint&&(this.closeProfile(),this.myBMW.classList.toggle(this.baseStr+"--active"))},toggleFill(close=!1,open=!1){PubSub.publish("nav.toggleFill",{className:"globalnav-primary-fill--active-my-bmw",close,open})},resizeEvt(e,resizeObj){960>(null==resizeObj?void 0:resizeObj.width)&&"desktop"===this.currentBreakpoint?this.currentBreakpoint="mobile":960<=(null==resizeObj?void 0:resizeObj.width)&&"mobile"===this.currentBreakpoint&&(this.currentBreakpoint="desktop",this.myBMW.classList.remove(this.baseStr+"--active"))},closeWithKeyboard(e){27===e.keyCode&&this.closeProfile()}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-nav.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js"));var _default=new _component.Component({el:".globalnav-primary",name:"globalnav-primary Component",events:{},subscriptions:{"window.resizeEnd":"resizeEvt"},currentBreakpoint:960>window.innerWidth?"mobile":"desktop",baseStr:"globalnav-primary",isOpen:!1,init(){this.navHolder=_component.$dom.qs(this.el),this.mobileIcon=this.navHolder.querySelector(this.el+"-dealer__mobile-nav-btn-holder");const dealerBar=_component.$dom.qs(this.el+"-dealer");this.bodyContent=_component.$dom.qs(".content-footer__container");const links=_component.$dom.qsa(".globalnav-primary__links a, .globalnav-primary-my-bmw a"),skipToContentWrapper=_component.$dom.qs(".skipToContent"),skipToContentCta=_component.$dom.qs(".skipToContent__cta");this.toggleNav=this.toggleNav.bind(this),this.mobileIcon.addEventListener("click",this.toggleNav),this.expandClassAdd=this.expandClassAdd.bind(this),this.expandClassRemove=this.expandClassRemove.bind(this),dealerBar.addEventListener("touchmove",this.killScroll),links.forEach(link=>{link.addEventListener("keydown",e=>{32===e.keyCode&&e.target.click()})}),"desktop"===this.currentBreakpoint&&(skipToContentCta.addEventListener("focusout",()=>{skipToContentWrapper.classList.remove("showingByTab")}),skipToContentCta.addEventListener("focusin",()=>{skipToContentWrapper.classList.add("showingByTab")}),skipToContentCta.addEventListener("click",this.focusablePage)),document.documentElement.style.setProperty("--current-nav-height",getComputedStyle(document.querySelector(".globalnav-primary")).getPropertyValue("--globalnav-primary-height"))},killScroll(e){e.preventDefault()},toggleNav(){const navHolderBar=this.navHolder.querySelector(this.el+"__bar");1280>window.innerWidth&&(this.isOpen=!this.isOpen,document.body.classList.toggle(this.baseStr+"--kill-scroll"),navHolderBar.classList.toggle(this.baseStr+"__bar--active"),this.mobileIcon.classList.toggle(this.baseStr+"-dealer__mobile-nav-btn-holder--active"),this.navHolder.classList.toggle(this.baseStr+"--active"),this.isOpen?(document.body.classList.add("mobile-nav-toggled"),PubSub.publish("local.nav.close",!0),setTimeout(()=>{this.bodyContent&&this.bodyContent.classList.add("content-footer__container--kill-scrolling"),PubSub.publish("bmw-grid.recalculate")},310)):(document.body.classList.remove("mobile-nav-toggled"),this.bodyContent&&this.bodyContent.classList.remove("content-footer__container--kill-scrolling"),setTimeout(()=>{navHolderBar.scrollTo(0,0),PubSub.publish("bmw-grid.recalculate"),PubSub.publish("primary.nav.close",!0)},350))),PubSub.publish("nav.toggleMyBMW",!0)},expandClassAdd(){this.navHolder.classList.add("globalnav-primary__collapse")},expandClassRemove(){this.navHolder.classList.remove("globalnav-primary__collapse")},focusablePage(e){e.preventDefault(),[".content-footer__container","header + div"].forEach(element=>{if(_component.$dom.qs(element))return _adaUtils.default.trapFocus(_component.$dom.qs(element),void 0),_component.$dom.qs('[tab-index*="0"]').focus(),_component.$dom.qs(element).scrollIntoView({behavior:"smooth"}),!1})},resizeEvt(e,resizeObj){"desktop"===this.currentBreakpoint&&960>(null==resizeObj?void 0:resizeObj.width)?this.currentBreakpoint="mobile":"mobile"===this.currentBreakpoint&&960<=(null==resizeObj?void 0:resizeObj.width)&&(this.currentBreakpoint="desktop",this.isOpen&&this.toggleNav())}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-scroll-event.js":function(module,exports,__webpack_require__){"use strict";function ScrollEvt(delay){this.initialY=scrollY,this.callbacks={start:null,scroll:null,end:null},this.timeout={delay:delay||150,handle:null},this.handler=ScrollEvt.handler.bind(this),window.addEventListener("scroll",this.handler)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=ScrollEvt,ScrollEvt.handler=function(e){if(0==this.initialY){null==this.timeout.handle&&this.callbacks.start&&this.callbacks.start.call(this,e),null!==this.timeout.handle&&clearTimeout(this.timeout.handle),this.callbacks.scroll&&this.callbacks.scroll.call(this,e);const self=this;this.timeout.handle=setTimeout((function(){self.timeout.handle=null,self.callbacks.end&&self.callbacks.end()}),this.timeout.delay)}else this.initialY=0},ScrollEvt.prototype.addEventListener=function(event,callback){Object.keys(this.callbacks).includes(event)?this.callbacks[event]=callback:console.warn("Invalid scroll event: "+event)},module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-search-results.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_autocompleteKeyboard=__webpack_require__("./frontend_src/bmwlib/utility/autocomplete-keyboard.js"),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js"));_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/breakpoints.js"));var _default=new _component.Component({el:".globalnav-primary-search-results",name:"globalnav-primary-search-results Component",baseStr:"globalnav-primary-search-results",events:{},subscriptions:{"search.open":"toggleDropDown","search.close":"toggleDropDown","search.results":"showResults","search.empty":"clearResults","search.mobile.toggle":"toggleDropDown","search.arrowKey":"activeResults","search.reset-active-filter":"resetActiveResults"},showingPopular:!0,showingSuggestions:!1,suggestionHasRun:!1,desktopWrapperElement:null,currentBreakpoint:1280<=window.innerWidth?"desktop":"mobile",beforeInit(){this.autocompleteKeyboard=new _autocompleteKeyboard.AutocompleteKeyboard,this.suggestionsHolder=this.element.querySelector(this.el+"__suggestions-content")},init(){this.element.querySelector(this.el+"__content-holder").addEventListener("click",this.linksClicked),this.element.addEventListener("keydown",this.closeWithKeyboard),this.desktopWrapperElement=this.element.closest(".globalnav-primary-search__show-on-large"),this.isDesktopEl="desktop"===this.currentBreakpoint&&!!this.desktopWrapperElement,this.trapFocus=null},linksClicked(e){e.target&&"a"===e.target.nodeName.toLowerCase()&&PubSub.publish("search-results.close")},closeWithKeyboard(e){27===e.keyCode&&PubSub.publish("search-results.close")},toggleDropDown(_,data){if(data&&data.open&&"desktop"===data.currentBreakpoint&&this.isDesktopEl){this.resetTrapFocus(!0),this.element.classList.add(this.baseStr+"--active");const input=this.element.querySelector(".globalnav-primary-search__input");input&&(input.value="",input.focus()),this.element.querySelector(this.el+"__content-holder").focus()}else!data&&this.isDesktopEl&&(this.element.classList.remove(this.baseStr+"--active"),this.clearResults(),this.resetTrapFocus(!1))},showResults(_,results){this.isDesktopEl&&(this.showingPopular?(this.showingPopular=!1,this.togglePopular(!1),this.suggestionHasRun?this.displayList(results):(this.suggestionHasRun=!0,this.suggestionsHolder.appendChild(this.resultsTemplateList(results)),this.suggestionsList=this.suggestionsHolder.querySelector("ul").children),this.toggleSuggestions(),this.showingSuggestions=!0):this.showingSuggestions&&this.displayList(results),this.resetTrapFocus(!0))},resetTrapFocus(isOpenModal){if(isOpenModal){this.trapFocus&&this.trapFocus.removeTrapEventListener();const _self=this,modal=document.body.querySelectorAll(".globalnav-primary-search__show-on-large .globalnav-primary-search-results"),modalCloseElement=document.body.querySelector(".globalnav-primary-search__show-on-large .globalnav-primary-search__close-search-btn");modal[0]&&(_self.trapFocus=_adaUtils.default.trapFocus(modal[0],modalCloseElement),_self.trapFocus.addTrapFocus())}else this.trapFocus&&this.trapFocus.removeTrapEventListener()},displayList(results){this.suggestionsHolder.querySelector("ul").innerHTML=this.makeList(results)},resultsTemplateList(data){const ul=document.createElement("ul");return ul.className="globalnav-primary-search-results__list",ul.innerHTML=this.makeList(data),ul},togglePopular(show=!0){const popularHolder=this.element.querySelector(this.el+"__popular-content");show?popularHolder.classList.remove(this.baseStr+"__popular-content--inactive"):popularHolder.classList.add(this.baseStr+"__popular-content--inactive")},toggleSuggestions(show=!0){show?this.suggestionsHolder.classList.remove(this.baseStr+"__suggestions-content--inactive"):this.suggestionsHolder.classList.add(this.baseStr+"__suggestions-content--inactive")},makeList(data){const searchUrl=document.querySelector(".globalnav-primary-search").getAttribute("action"),limit=1280<window.innerWidth?100:45;let listItem="";return data&&0<data.length&&data.forEach(term=>{let title=term;if("string"!=typeof title)return listItem;term.length>limit&&(title=term.substring(0,limit)+"..."),title=title.replace(/\s+\u002D+\s|\s+\u2014+\s/g,"  ");const parsTitle=title.split("  ");2<parsTitle.length&&(title=parsTitle.slice(0,2).join("  ")),listItem+=`<li><a href="${searchUrl}${encodeURI(term)}">${title.trim()}</a></li>`}),listItem},activeResults(_,dir){const max=this.suggestionsList.length,activeItem=this.suggestionsHolder.querySelector(".search-auto-active"),text=this.autocompleteKeyboard.runKeyboardHighlights({max,activeStr:"search-auto-active",resultItems:this.suggestionsList,activeItem},dir).querySelector("a").textContent;PubSub.publish("search-results.active-item",text.trim())},checkActiveFilter(){const isActive=this.suggestionsHolder.querySelector(".search-auto-active");isActive&&isActive.classList.remove("search-auto-active")},resetActiveResults(){this.autocompleteKeyboard.reset(),this.checkActiveFilter(),PubSub.publish("search-results.active-item",!1)},clearResults(){this.toggleSuggestions(!1),this.togglePopular(),this.resetActiveResults(),this.suggestionHasRun&&(this.resetTrapFocus(!0),this.suggestionsHolder.querySelector("ul").innerHTML="",this.showingPopular=!0,this.showingSuggestions=!1)}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-search.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_matchArrays=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/matchArrays.js"));var _default=new _component.Component({el:".globalnav-primary-search",name:"globalnav-primary-search Component",events:{"keyup .globalnav-primary-search__input":"keyupEvt"},subscriptions:{"window.resizeEnd":"resizeEvt","primary.nav.close":"closeSearch","dealer.open":"closeSearch","my-bmw.open":"closeSearch","fill.clicked":"closeSearch","primary.nav-toggle":"closeSearch","search-results.active-item":"setSearchVal","search-results.close":"closeSearch","search.close":"closeSearch"},count:5,isSearchOpen:!1,isClearSet:!1,searchOpenStr:"globalnav-primary-search--active",clearActiveStr:"globalnav-primary-search__clear-btn--active",componetBaseStr:"globalnav-primary-search",resultStr:"globalnav-primary-search-results",currentBreakpoint:1280>window.innerWidth?"mobile":"desktop",endPointBase:"https://search-api.swiftype.com/api/v1/public/engines/suggest.json?q=",key:"ewC-fTzAJvmjkNzgf7xb",activeSearchTerm:!1,init(){this.search=this.element,this.searchBtn=this.search.querySelector(`.${this.componetBaseStr}__search-btn`),this.closeSearchBtn=this.search.querySelector(`.${this.componetBaseStr}__close-search-btn`),this.clearBtn=this.search.querySelector(`.${this.componetBaseStr}__clear-holder`),this.input=this.search.querySelector(`.${this.componetBaseStr}__input`),this.searchHolder=this.search.querySelector(`.${this.componetBaseStr}__search-holder`),this.mainNavBar=document.querySelector(".globalnav-primary__bar"),this.mainNavTrans=this.mainNavBar.querySelector(".globalnav-primary__trans-holder"),this.primaryNav=document.querySelector(".globalnav-primary"),this.isButtonOnly=this.element.classList.contains("globalnav-primary-search--icon-only"),this.openSearch=this.openSearch.bind(this),this.submitSearch=this.submitSearch.bind(this),this.clearInput=this.clearInput.bind(this),this.mobileSearch=this.mobileSearch.bind(this),this.closeSearch=this.closeSearch.bind(this),this.done=this.done.bind(this),this.closeWithKeyboard=this.closeWithKeyboard.bind(this),this.search.addEventListener("submit",this.submitSearch),this.closeSearchBtn.addEventListener("click",this.closeSearch),this.clearBtn.addEventListener("click",this.clearInput),"desktop"===this.currentBreakpoint?this.desktopEvents():this.mobileEvents()},desktopEvents(){this.search.addEventListener("click",this.openSearch),this.search.addEventListener("keydown",this.openSearch),this.element.addEventListener("keydown",this.closeWithKeyboard)},mobileEvents(){this.searchHolder.addEventListener("click",this.mobileSearch)},killMobileEvents(){this.searchHolder.removeEventListener("click",this.mobileSearch)},killDesktopEvents(){this.search.removeEventListener("click",this.openSearch),this.search.removeEventListener("keydown",this.openSearch),this.element.removeEventListener("keydown",this.closeWithKeyboard)},mobileSearch(){if(!this.isSearchOpen){const searchPosition=this.search.getBoundingClientRect(),primaryNavPosition=this.primaryNav.getBoundingClientRect();this.mainNavTrans.addEventListener("touchmove",this.killScroll),this.mainNavBar.classList.add("globalnav-primary__bar--kill-scroll"),this.searchHolder.classList.add(this.componetBaseStr+"__search-holder--active"),this.search.classList.add(this.searchOpenStr),this.mainNavTrans.style.transform=`translateY(-${searchPosition.top-primaryNavPosition.height}px)`,this.isSearchOpen=!0,PubSub.publish("search.mobile.toggle",!0)}},openSearch(e){this.isButtonOnly&&!this.isSearchOpen&&("click"===e.type||e.keyCode&&13===e.keyCode)&&(this.isSearchOpen=!0,this.search.classList.add(this.searchOpenStr),this.toggleFill(!1,!0),document.body.classList.add(this.componetBaseStr+"--kill-scroll"),PubSub.publish("search.open",{open:!0,event:e,currentBreakpoint:this.currentBreakpoint}))},closeWithKeyboard(e){this.isSearchOpen&&e.keyCode&&27===e.keyCode&&this.closeSearch(e)},closeSearch(e){this.isSearchOpen&&(e&&"string"!=typeof e&&e.stopPropagation(),"mobile"===this.currentBreakpoint?(this.searchHolder.classList.remove(this.componetBaseStr+"__search-holder--active"),this.mainNavBar.classList.remove("globalnav-primary__bar--kill-scroll"),this.search.classList.remove(this.searchOpenStr),this.mainNavTrans.style.transform="",this.mainNavTrans.removeEventListener("touchmove",this.killScroll),this.isSearchOpen=!1):(this.search.classList.remove(this.searchOpenStr),this.isSearchOpen=!1,document.body.classList.remove(this.componetBaseStr+"--kill-scroll"),this.toggleFill(!0,!1),this.searchBtn.focus()),this.isClearSet&&this.clearInput(),PubSub.publish("search.close",!1))},keyupEvt(e){const val=e.target.value;!this.isClearSet&&0<val.length?(this.clearBtn.classList.add(this.clearActiveStr),this.isClearSet=!0):this.isClearSet&&0>=val.length?(this.clearBtn.classList.remove(this.clearActiveStr),this.isClearSet=!1,PubSub.publish("search.empty")):3<=val.length&&40!==e.which&&38!==e.which?(this.getResults(encodeURI(val)),PubSub.publish("search.reset-active-filter")):3>val.length&&9!==e.which&&(this.prevTitles=[],PubSub.publish("search.empty")),27===e.which?PubSub.publish("search.empty"):3<=val.length&&40===e.which?PubSub.publish("search.arrowKey","down"):3<=val.length&&38===e.which&&PubSub.publish("search.arrowKey","up")},getResults(val){_component.request.get(`${this.endPointBase}${val}&per_page=${this.count}&precise_expiration=true&engine_key=${this.key}`).set("Content-Type","application/json").end(this.done)},prevTitles:[],done(err,res){const data=JSON.parse(res.text).records.page,responseTitles=[];let isEqual=!0;data&&0<data.length?(data.forEach(term=>{0>responseTitles.indexOf(term.title)&&responseTitles.push(term.title)}),isEqual=(0,_matchArrays.default)(responseTitles,this.prevTitles)):PubSub.publish("search.empty"),isEqual||(PubSub.publish("search.results",responseTitles),this.prevTitles=responseTitles)},clearInput(){this.input.value="",this.clearBtn.classList.remove(this.clearActiveStr),this.isClearSet=!1,this.prevTitles=[],this.input.focus(),PubSub.publish("search.empty")},killScroll(e){e.preventDefault()},submitSearch(e){e.preventDefault();const isValid=this.search.checkValidity(),_input=this.input?this.input.value:null,url=this.search.getAttribute("action"),val=this.activeSearchTerm||_input;isValid&&_input&&(this.activeSearchTerm&&this.input&&(this.input.value=this.activeSearchTerm),this.closeSearch(),window.location.href=url+val)},toggleFill(close=!1,open=!1){PubSub.publish("nav.toggleFill",{className:"globalnav-primary-fill--active-search",close,open})},resizeEvt(e,resizeObj){"desktop"===this.currentBreakpoint&&1280>(null==resizeObj?void 0:resizeObj.width)?(this.isSearchOpen&&this.closeSearch(),this.killDesktopEvents(),this.mobileEvents(),this.currentBreakpoint="mobile"):"mobile"===this.currentBreakpoint&&1280<=(null==resizeObj?void 0:resizeObj.width)&&(this.isSearchOpen&&this.closeSearch(),this.desktopEvents(),this.killMobileEvents(),this.currentBreakpoint="desktop")},setSearchVal(e,val){this.activeSearchTerm=!!val&&`&ldquo;${val}&rdquo;`}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/primary-vehicles.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_isAuthor=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/aem/is-author.js")),_adaUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/ada-utils.js"));var _default=new _component.Component({el:".globalnav-primary-vehicles",name:"globalnav-primary-vehicles Component",baseSrt:"globalnav-primary-vehicles",subscriptions:{"window.resizeEnd":"resizeEvt",resetTab:"defaultTab","nav.vehicle-close":"defaultTab"},isDefaultState:!0,lazyLoad:!0,sortedCarsList:{},currentBreakpoint:768>window.innerWidth?"mobile":"desktop",isRetina:2===window.devicePixelRatio,imageWidths:{mobile1x:"350",mobile2x:"700",desktop1x:"450",desktop2x:"900"},isAuthor:!!(0,_isAuthor.default)(),init(){this.isAuthor||(this.nav=this.element.querySelector(this.el+"__filter"),this.vehicles=this.element,this.tabsHolder=this.element.querySelector(this.el+"__tab-holder"),this.tabs=this.element.querySelectorAll(this.el+"__tab"),this.changeTab=this.changeTab.bind(this),this.nav.addEventListener("click",this.changeTab),this.initTab(),this.sortCars(),_adaUtils.default.restrictFocus({container:this.element.querySelector('.globalnav-primary-vehicles__tab[data-filter="electrified"]')}))},initTab(){const active=this.element.querySelector(this.el+"__filter-type--active");this.setActiveBar(active.offsetLeft,active.offsetWidth)},sortCars(){const carsList=this.tabs[0].querySelector(`.${this.baseSrt}__cars .aem-Grid`).children;let allCars="";for(let i=0;i<carsList.length;i++){carsList[i];const carElem=carsList[i].querySelector(`.${this.baseSrt}__car`),carObj=JSON.parse(carElem.dataset.category),carDefault=JSON.parse(carElem.dataset.defaultTab);carElem.dataset.hideDefaultTab||(allCars+=this.template(carDefault)),carObj.forEach(carData=>{this.setArrayVal(carData.category,carData)})}for(const item in this.tabs[0].querySelector(`.${this.baseSrt}__cars`).innerHTML=allCars,this.sortedCarsList){let elem="";const holder=document.querySelector(`.globalnav-primary-vehicles__block[data-filter="${item}"] .globalnav-primary-vehicles__cars`);holder&&(this.sortedCarsList[item].forEach(element=>{elem+=this.template(element)}),holder.innerHTML=elem)}},mergeEngineStyles(){const electricHolder=document.querySelector(".globalnav-primary-vehicles__tab[data-filter='electric']"),pluginHolder=document.querySelector(".globalnav-primary-vehicles__tab[data-filter='plug-in hybrids']");if(electricHolder&&pluginHolder){const pluginBlock=pluginHolder.querySelector(".globalnav-primary-vehicles__block");if(pluginBlock)return electricHolder.appendChild(pluginBlock),void pluginHolder.parentNode.removeChild(pluginHolder)}},template(data){const imageWidth=this.getImageWidth();return`<div class="globalnav-primary-vehicles__car">\n              <a class="header-vehicle-tile__link"\n                href="${data.destinationUrl}"\n                title="${data.title}"\n                analytics-on=""\n                analytics-event="${data.analytics}">\n                <img alt="${data.altText}"\n                  data-src="${data.imageUrl}${"true"===data.isDamAsset?"":"&width="+imageWidth} "\n                  src="${this.lazyLoad?"":data.imageUrl}">\n                <div class="header-vehicle-title__content">${data.title}${data.productModelText?`<span>${data.productModelText}</span>`:""}</div>\n                ${data.productTitleExtendedText?`<div class="header-vehicle-tile__extended header-vehicle-title__content">${data.productTitleExtendedText}</div>`:""}\n              </a>\n            </div>`},setArrayVal(key,carData){const keyVal=key.trim().toLowerCase();this.sortedCarsList.hasOwnProperty(keyVal)?this.sortedCarsList[keyVal].push(carData):this.sortedCarsList[keyVal]=[carData]},defaultTab(){if(!this.isDefaultState){const currentTab=this.element.querySelector(this.el+"__tab--active"),currentNavTab=this.element.querySelector(this.el+"__filter-type--active"),bgActive=this.element.classList.contains(this.baseSrt+"__filter-bg--active"),firstNavNode=this.nav.querySelectorAll("li")[0],firstTab=this.tabs[0];currentTab.classList.remove(this.baseSrt+"__tab--active"),currentNavTab.classList.remove(this.baseSrt+"__filter-type--active"),firstTab.classList.add(this.baseSrt+"__tab--active"),firstNavNode.children[0].classList.add(this.baseSrt+"__filter-type--active"),this.setActiveBar(firstNavNode.offsetLeft,firstNavNode.offsetWidth),this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`),bgActive&&(this.element.classList.remove(this.baseSrt+"__filter-bg--active"),this.element.style.backgroundImage="none"),this.toggleTabSetting(firstTab,currentTab),this.isDefaultState=!0}},toggleTabSetting(newElem,currentElem=!1){this.tabs.forEach(tab=>{tab.setAttribute("tabindex","-1"),tab.style.display="none"}),currentElem&&(currentElem.style.position="",currentElem.style.overflow="",currentElem.style.display="none",currentElem.querySelectorAll("a").forEach(element=>element.style.visibility="hidden")),newElem.style.position="relative",newElem.style.overflow="visible",newElem.removeAttribute("tabindex"),newElem.style.display="block",newElem.querySelectorAll("a").forEach(element=>element.style.visibility="visible")},changeTab(e){if(e.target.matches(this.el+"__filter-type")){const elem=e.target,filter=elem.dataset.filter,newTab=document.querySelector(`${this.el}__tab[data-filter="${filter}"]`),currentTab=document.querySelector(this.el+"__tab--active"),currentNavTab=document.querySelector(this.el+"__filter-type--active"),theme=elem.dataset.theme,bgImage=elem.dataset.bgImage;this.element.querySelector(this.el+"__filter-bg--active");this.isDefaultState=!1,this.setActiveBar(elem.offsetLeft,elem.offsetWidth),elem.classList.contains(this.baseSrt+"__filter-type--active")||(!1===(theme&&"none"!==theme||!1)?this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`):(this.vehicles.classList.remove(`${this.baseSrt}--${this.isThemeActive}`),this.isThemeActive=theme,this.vehicles.classList.add(`${this.baseSrt}--${this.isThemeActive}`)),!1===(bgImage&&"none"!==bgImage||!1)?(this.vehicles.style.backgroundImage="none",this.vehicles.classList.remove(this.baseSrt+"__filter-bg--active")):(this.vehicles.classList.remove(this.baseSrt+"__filter-bg--active"),this.vehicles.style.backgroundImage=`url(${bgImage})`,this.vehicles.classList.add(this.baseSrt+"__filter-bg--active"),PubSub.publish("vehicle-background.embedded.nav")),currentTab.classList.remove(this.baseSrt+"__tab--active"),newTab.classList.add(this.baseSrt+"__tab--active"),currentNavTab.classList.remove(this.baseSrt+"__filter-type--active"),elem.classList.add(this.baseSrt+"__filter-type--active"),setTimeout(()=>{this.toggleTabSetting(newTab,currentTab)},300),PubSub.publish("primary.nav.vehicleOpen"))}},setActiveBar(left,width){const activeBar=this.element.querySelector(this.el+"__filter-active-bar");activeBar.style.left=left+"px",activeBar.style.width=width+"px"},getImageWidth(){let imageWidth=this.isRetina?this.imageWidths.mobile2x:this.imageWidths.mobile1x;return"desktop"===this.currentBreakpoint&&(imageWidth=this.isRetina?this.imageWidths.desktop2x:this.imageWidths.desktop1x),imageWidth},resetActiveBar(){const activeItem=this.element.querySelector(`.${this.baseSrt}__filter-type--active`);this.setActiveBar(activeItem.offsetLeft,activeItem.offsetWidth)},resizeEvt(e,resizeObj){this.isAuthor||(768>(null==resizeObj?void 0:resizeObj.width)&&!this.isDefaultState&&this.defaultTab(),this.resetActiveBar())}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/components/profileLinks-conf.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={home:{name:"Home",title:"",url:"",id:"home",icon:{iconId:"#icon-bmw-home",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},myGarage:{name:"My Garage",title:"",url:"",id:"myGarage",icon:{iconId:"#icon-my-bmw-car",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},myAccount:{name:"My Account",title:"",url:"",id:"myAccount",icon:{iconId:"#icon-my-bmw-money",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:"",css:"globalnav-primary-my-bmw__profile--money"},myProfile:{name:"My Profile",title:"",url:"",id:"myProfile",icon:{iconId:"#icon-nav-profile",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},bmwLogin:{name:"BMW Login",title:"",url:"",id:"bmwLogin",icon:{iconId:"#icon-my-bmw-edit",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""},logOutMyBMW:{name:"Log Out of My BMW",title:"",url:"",id:"logOutMyBMW",icon:{iconId:"",iconUrl:""},isNewTab:!1,isActive:!0,analyticEvent:""}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/globalnav.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js");_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-nav.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-search.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-search-results.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-my-bmw.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-location-bar.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-drop-down.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-drop-down-nav.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-vehicles.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-fill.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-scroll-event.js")),_interopRequireDefault(__webpack_require__("./frontend_src/components/globalnav/js/components/primary-micronav.js"));var _default=new _component.Component({el:".globalnav",name:"globalnav Component",init(){window.onload=()=>this.setDocumentFocus()},setDocumentFocus(){document.querySelector("body").focus()}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/globalnav/js/templates/my-bmw-loggedin-template.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=function(sessionData={},urlData){let menuList="";for(const item in urlData)if("logOutMyBMW"!==urlData[item].id){let icon="";urlData[item].icon&&urlData[item].icon.iconId?icon=`<figure class="${urlData[item].icon.css?urlData[item].icon.css:""}">\n                  <svg>\n                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="${urlData[item].icon.iconId}"></use>\n                  </svg>\n                </figure>`:urlData[item].icon&&urlData[item].icon.iconUrl&&(icon=`<img src="${urlData[item].icon.iconUrl}"></img>`),menuList+=`<li>\n                  <a id="${urlData[item].id?urlData[item].id:""}" href="${urlData[item].url}" title="${urlData[item].title?urlData[item].title:""}" target="${urlData[item].isNewTab?"_blank":"_self"}">\n                    <div class="wrapper-icon">${icon}</div>\n                    <span>${urlData[item].name}</span>\n                  </a>\n                </li>`}const logOut=urlData.logOutMyBMW;return`<div class="globalnav-primary-my-bmw__profile-inner-shell">\n                <nav class="globalnav-primary-my-bmw__profile-options">\n                  <ul class="globalnav-primary-my-bmw__profile-list">\n                    ${menuList}\n                  </ul>\n                  <a id="${logOut.id}" href="${logOut.url}?client_id=${sessionData.gcid}" title="${logOut.title?logOut.title:""}"><span>${logOut.name}</span></a>\n                </nav>\n              </div>`};exports.default=_default,module.exports=exports.default},36:function(module,exports,__webpack_require__){module.exports=__webpack_require__("./frontend_src/components/globalnav/js/globalnav.js")}});
//# sourceMappingURL=/etc/designs/bmwusa/bmwusa-clientlibs/bmwusa-sourcemaps/bmwusa-globalnav-203902800b3faaf5f071.js.map