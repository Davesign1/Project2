/*!
 *  BMWUSA 
 *  Name: content-toggle 
 * 
 */!function(modules){function webpackJsonpCallback(data){for(var moduleId,chunkId,chunkIds=data[0],moreModules=data[1],executeModules=data[2],i=0,resolves=[];i<chunkIds.length;i++)chunkId=chunkIds[i],Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]&&resolves.push(installedChunks[chunkId][0]),installedChunks[chunkId]=0;for(moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(modules[moduleId]=moreModules[moduleId]);for(parentJsonpFunction&&parentJsonpFunction(data);resolves.length;)resolves.shift()();return deferredModules.push.apply(deferredModules,executeModules||[]),checkDeferredModules()}function checkDeferredModules(){for(var result,i=0;i<deferredModules.length;i++){for(var deferredModule=deferredModules[i],fulfilled=!0,j=1;j<deferredModule.length;j++){var depId=deferredModule[j];0!==installedChunks[depId]&&(fulfilled=!1)}fulfilled&&(deferredModules.splice(i--,1),result=__webpack_require__(__webpack_require__.s=deferredModule[0]))}return result}var installedModules={},installedChunks={21:0},deferredModules=[];function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/etc/designs/bmwusa/bmwusa-clientlibs/";var jsonpArray=window.webpackJsonp=window.webpackJsonp||[],oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback,jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([16,0]),checkDeferredModules()}({"./frontend_src/bmwlib/api-services/dealer-search.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.DealerSearch=void 0;var _baseDealerApi=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/base-dealer-api.js")),_dataNormalization=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/api-services/data-normalization.js")),_dealerInfo=__webpack_require__("./frontend_src/bmwlib/api-services/dealer-info.js");class DealerSearch extends _baseDealerApi.default{constructor(){super(),this.searchResults=this.searchResults.bind(this)}latLonSearch(val,callback,raw=!1,serviceType=null){const{Lat,Lon}=val;let endpoint=`?dealers/coordinate/${Lat.toFixed(6)},${Lon.toFixed(6)}?pmaOnly=false&includeSatelliteDealers=true`;serviceType&&(endpoint+="?serviceType="+serviceType),this.getData(endpoint,(err,res)=>{this.searchResults(err,res,callback,raw)})}searchCity(val,callback,raw=!1,serviceType=null){const{state,city}=val;let endpoint=`?getdealerdetailsByCityState/?city=${encodeURI(city)}&state=${state}&includeSatelliteDealers=true`;serviceType&&(endpoint+="&serviceType="+serviceType),this.getData(endpoint,(err,res)=>{this.searchResults(err,res,callback,raw)})}searchZip(val,callback,raw=!1,serviceType=null,type=null){let endpoint=`?getdealerdetailsByRadius/${val}/100?includeSatelliteDealers=true`;serviceType&&(endpoint+="/"+serviceType),this.getData(endpoint,(err,res)=>{this.searchResults(err,res,callback,raw,type)})}searchDealer(val,callback,raw=!1){this.getData("?getdealerdetailsByDealerName?dealerName="+encodeURI(val),(err,res)=>{this.searchResults(err,res,callback,raw)})}getMaco(){_dealerInfo.DealerInfoApi.getMacoDataApi(utility.CleanZip(ZipCode)).then(res=>{this.macoData(res)}).catch(err=>{console.error(err),this.toggleErrorState(this.dealerSearchInput,!0)})}macoResults(err,res,callback){if(null!==err)callback(err,!0);else{const macoData=_dataNormalization.default.maco(res);macoData?callback(err,macoData):callback("bad response",!0)}}searchResults(err,res,callback,raw=!1,type=null){if(err)this.raiseEvent("dealer-search","dealer search error","error",err),callback(err,res);else{let searchData;if(raw){var _searchData$dataConte,_searchData$dataConte2,_searchData$dataConte3,_searchData$dataConte4;searchData=_dataNormalization.default.parseData(res.text),searchData.Results=_dataNormalization.default.dealerData(res),searchData.Maco=_dataNormalization.default.maco(res);const lat=+(null===(_searchData$dataConte=searchData.dataContent)||void 0===_searchData$dataConte||null===(_searchData$dataConte2=_searchData$dataConte.dealerDetails)||void 0===_searchData$dataConte2?void 0:_searchData$dataConte2.latitude)||null,lon=+(null===(_searchData$dataConte3=searchData.dataContent)||void 0===_searchData$dataConte3||null===(_searchData$dataConte4=_searchData$dataConte3.dealerDetails)||void 0===_searchData$dataConte4?void 0:_searchData$dataConte4.longitude)||null;searchData.Center=_dataNormalization.default.coordinate({Lat:lat,Lon:lon})}else searchData=_dataNormalization.default.dealerData(res);searchData?callback(err,searchData,type):callback(!0,"bad response")}}}exports.DealerSearch=DealerSearch},"./frontend_src/bmwlib/utility/angular-utils.js":function(module,exports,__webpack_require__){"use strict";var _component=__webpack_require__("./frontend_src/bmwlib/component.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={qs:selector=>angular.element(_component.$dom.qs(selector,document)),initialize(containerEl){if(window.angular){this.qs("body").injector().invoke($compile=>{const container=angular.element(containerEl),$scope=container.scope();$compile(container.contents())($scope),$scope.$digest()})}},refresh(){window.angular&&angular.element(document.body).scope().$root.$apply()}};exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/modules/spa.js":function(module,exports,__webpack_require__){"use strict";var _spa=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js")(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/spa.js"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={init(){["/build-your-own.html","/inventory.html"].includes(window.location.pathname)&&(this.triggerView(window.location.hash),window.addEventListener("vueHashChange",()=>{const message=window.location.hash;message&&_spa.default.triggerView(message)},!1))},triggerView(viewName){_spa.default.triggerView(viewName)}};exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/personalization.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _spa=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/spa.js")),_offers=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/offers.js")),_debounce=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/debounce.js")),_attributionInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/attribution-info.js")),_dealerSearch=__webpack_require__("./frontend_src/bmwlib/api-services/dealer-search.js"),_pageInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/page-info.js")),_crm=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/crm.js"));var _default={queryString:window.location.search.substring(1),userAttribution:_attributionInfo.default.getAttributionData(),indirectAttribution:"",indirectAttributionValues:{},directAttribution:"",consolidationExperience:"",maco:"",dealerInfo:localStorage.getItem("dealer_info"),media:{cid:"",tier:"",maco:"",channel:"",vehicle:""},pageParams:{},init(){this.indirectAttribution=this.parseQueryString(localStorage.getItem("attributionString")),this.setFlag(),this.dealerInfo=this.dealerInfo?JSON.parse(this.dealerInfo):{},this.dealerSearch=new _dealerSearch.DealerSearch,this.zipCode=this.dealerInfo.ZipCode||BMWdataLayer.user.location,"directMedia"===sessionStorage.getItem("attributionType")?this.processDirectMedia():this.processIndirectMedia(),this.setConsolidatedValues(this.consolidationExperience,this.maco),_crm.default.init(),document.addEventListener("at-library-loaded",()=>{_spa.default.init(),PubSub.subscribe("zipLocationUpdate",(0,_debounce.default)((e,data)=>this.handleLocationChange(data.zipCode),500))}),window.addEventListener("vueHashChange",(0,_debounce.default)(()=>{const message=window.location.hash;message&&_spa.default.triggerView(message)},500))},triggerAdobeTargetCall(message){var _window,_window$adobe,_window$adobe$target;null===(_window=window)||void 0===_window||null===(_window$adobe=_window.adobe)||void 0===_window$adobe||null===(_window$adobe$target=_window$adobe.target)||void 0===_window$adobe$target||_window$adobe$target.triggerView(message)},handleLocationChange(zipCode){zipCode&&BMWdataLayer.user.selectedDealer&&(this.zipCode=BMWdataLayer.user.selectedDealer.DealerZipCode,localStorage.setItem("attributionString",""),sessionStorage.setItem("attributionString",""),sessionStorage.setItem("attributionType","indirectMediaAttribution"),this.processIndirectMedia(),this.setConsolidatedValues(this.consolidationExperience,BMWdataLayer.user.selectedDealer.MacoCode),_offers.default.getOffersByMacoCode())},setConsolidatedValues(experience,maco){sessionStorage.setItem("consolidatedValues",JSON.stringify({consolidationExperience:experience,consolidatedMacoId:maco}))},setFlag(){const storedMaco=this.indirectAttribution.maco,changedMaco=this.indirectAttribution.zipChangedMaco;if(/cid=|tier=|maco=|ch=|veh=/.test(this.queryString))sessionStorage.setItem("attributionString",this.queryString),sessionStorage.setItem("attributionType","directMedia"),localStorage.setItem("attributionString",this.queryString),localStorage.setItem("attributionStartTime",Math.floor(Date.now()/1e3));else if("string"==typeof localStorage.getItem("attributionString")){const localAttribution=localStorage.getItem("attributionString");sessionStorage.setItem("attributionString",localAttribution),/cid=|tier=|maco=|ch=|veh=/.test(localAttribution)?changedMaco&&storedMaco!==changedMaco?sessionStorage.setItem("attributionType","indirectMediaAttribution"):sessionStorage.setItem("attributionType","directMedia"):sessionStorage.setItem("attributionType","indirectMediaAttribution")}},parseQueryString(qs){let params={};if(!qs)return params;let queries=qs.split("&");for(let i=0,l=queries.length;i<l;i++){const temp=queries[i].split("=");params[temp[0]]=temp[1]}return params},processDirectMedia(){this.consolidationExperience="matched media",this.processMediaValues(),this.maco=4==this.media.maco.length&&"0000"!=this.media.maco?this.media.maco:this.dealerInfo.maco?this.dealerInfo.maco.Code:"",this.setTargetPageParams()},processIndirectMedia(){this.dealerInfo.maco?(this.maco=this.dealerInfo.maco.Code,this.consolidationExperience="tier 2 regionalization"):"indirectMediaAttribution"===sessionStorage.getItem("attributionType")&&2419200>Math.floor(Date.now()/1e3)-localStorage.getItem("attributionStartTime")?(this.consolidationExperience="tier 2 regionalization",this.processMediaValues()):(this.maco="",this.consolidationExperience="standard"),this.setTargetPageParams()},processMediaValues(){"string"==typeof this.userAttribution.campaignId?this.media.cid=this.userAttribution.campaignId:this.indirectAttributionValues.cid&&(this.media.cid=indirectAttributionValues.cid),"string"==typeof this.userAttribution.tier?this.media.tier=this.userAttribution.tier:this.indirectAttributionValues.tier&&(this.media.tier=indirectAttributionValues.tier),"string"==typeof this.userAttribution.macoCode?this.media.maco=this.userAttribution.macoCode:this.indirectAttributionValues.maco&&(this.media.maco=indirectAttributionValues.maco),"string"==typeof this.userAttribution.channel?this.media.channel=this.userAttribution.channel:this.indirectAttributionValues.ch&&(this.media.channel=indirectAttributionValues.ch),"string"==typeof this.userAttribution.vehicle?this.media.vehicle=this.userAttribution.vehicle:this.indirectAttributionValues.veh&&(this.media.vehicle=indirectAttributionValues.veh)},setTargetPageParams(){window.customTargetPageParams=()=>({consolidationExperience:this.consolidationExperience,consolidatedMacoId:this.maco,mediaVisitType:sessionStorage.getItem("attributionType"),mediaTier:this.media.tier,mediaChannel:this.media.channel,mediaVehicle:this.media.vehicle,mediaCampaignId:this.media.cid,profile:{"user location":this.zipCode},"BMWdataLayer-page-name":(0,_pageInfo.default)().name})}};exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/utils/crm.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dealerInfo=__webpack_require__("./frontend_src/bmwlib/api-services/dealer-info.js"),_getqueryparams=(__webpack_require__("./frontend_src/components/global-messaging/js/global-messaging.js"),_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/getqueryparams.js"))),_attributionInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/attribution-info.js"));var _default={params:(0,_getqueryparams.default)(),init(){this.updateDealer()},updateDealer(){if((this.isSetDealerEnabled()||this.isOrtmEnabled())&&!this.preferredDealerExists()){void 0!==localStorage.dealer_info&&this.setDealerChangeFlag(!1);const dealerId=BMWdataLayer.user.attribution.dealerid,centerId=dealerId.substring(0,5),locationId=dealerId.substring(5).replace("-","");_dealerInfo.DealerInfoApi.getSingleDealerApi(centerId,locationId).then(dealerInfo=>{_dealerInfo.DealerInfoApi.getCombinedDataApi(dealerInfo.ZipCode).then(combinedData=>{const maco={Code:combinedData.maco.MacoCode,Display:combinedData.maco.MacoDisplay,Name:combinedData.maco.MacoName,Url:combinedData.maco.MacoUrl};_dealerInfo.DealerInfoApi.updateFromParts(combinedData.dealerList,dealerInfo,maco,dealerInfo.ZipCode)}),PubSub.publish("globalnav.embedded.dealerInfo"),PubSub.subscribe("dtmPrimaryDealershipSelected",()=>{this.setDealerChangeFlag(!0)})})}},setDealerChangeFlag(boolean){const newDealerInfo=JSON.parse(localStorage.dealer_info);newDealerInfo.preferredDealerChangedByUser=boolean,localStorage.dealer_info=JSON.stringify(newDealerInfo)},isOrtmEnabled(){var _attributionInfo$getA;return null===(_attributionInfo$getA=_attributionInfo.default.getAttributionData().campaignId)||void 0===_attributionInfo$getA?void 0:_attributionInfo$getA.includes("ortm")},isSetDealerEnabled(){var _attributionInfo$getA2;return null===(_attributionInfo$getA2=_attributionInfo.default.getAttributionData().campaignId)||void 0===_attributionInfo$getA2?void 0:_attributionInfo$getA2.includes("setdealer")},isEnabled(){return this.isOrtmEnabled()||this.isSetDealerEnabled()},preferredDealerExists:()=>_dealerInfo.DealerInfoApi.getDealerInfoCookie(),filterOfferBySeries(offersData,vehParameter){const stringSanitizer=str=>str.toLowerCase().replace(/\s+/g,"");return/x\dm/.test(vehParameter)?offersData.filter(offer=>stringSanitizer(offer.modelDescription).startsWith(vehParameter)):/m\d/.test(vehParameter)?offersData.filter(offer=>"M"===offer.modelSeries&&offer.seriesName.startsWith(vehParameter.match(/\d/)[0])):offersData.filter(offer=>stringSanitizer(offer.seriesName)==vehParameter)}};exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/utils/offers.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _defineProperty2=_interopRequireDefault(__webpack_require__("./node_modules/@babel/runtime/helpers/defineProperty.js")),_target=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/target.js"));_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/storage.js"));function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}const OffersUtils={requestModel:{request:{execute:{pageLoad:{parameters:{}}}}},getConsolidatedData:()=>{let data={};return _target.default.isDataLayerMacoAvailable()&&(data={consolidatedMacoId:_target.default.getDataLayerMaco().macoCode,consolidationExperience:"tier 2 regionalization","BMWdataLayer-user-location":BMWdataLayer.user.location}),data},getRequestModel:()=>function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_defineProperty2.default)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},OffersUtils.requestModel),addRequestParameters:(requestModel,params)=>(requestModel&&params&&(requestModel.request.execute.pageLoad.parameters=params),requestModel),addAnalyticsResponseParameters:(responseModel,params)=>(responseModel&&params&&(responseModel.execute.pageLoad.analytics={payload:params}),responseModel),getOffersByMacoCode:()=>{OffersUtils.getOffers(OffersUtils.getConsolidatedData())},getOffers:requestParams=>{if(_target.default.isTargetEnabled()){const request=OffersUtils.getRequestModel();OffersUtils.addRequestParameters(request,requestParams),adobe.target.getOffers(request).then(response=>adobe.target.applyOffers({response})).catch(()=>{})}},applyTargetOffer:response=>{_target.default.isTargetEnabled()&&response&&adobe.target.applyOffers({response})}};var _default=OffersUtils;exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/utils/spa.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _target=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/target.js")),_offers=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/offers.js")),_spa=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/modules/spa.js"));const SpaUtils={isSpaPersonalizationEnabled:!1,init(){document.addEventListener("DOMContentLoaded",()=>{this.isSpaPersonalizationEnabled=document.body.dataset.targetSpa,_spa.default.init()})},triggerView(viewName){viewName=SpaUtils.sanitizeViewName(viewName),"undefined"!=typeof adobe&&adobe.target&&"function"==typeof adobe.target.triggerView&&adobe.target.triggerView(viewName)},updateOffersByZipCode:zipCode=>{_target.default.isTargetEnabled&&zipCode&&_offers.default.getOffersByMacoCode()},sanitizeViewName(viewName){let pathName=window.location.pathname;return pathName.includes("/content/bmwusa/marketUS/bmwusa_com/en_US")&&(pathName=pathName.split("/content/bmwusa/marketUS/bmwusa_com/en_US")[1]),pathName.includes("build-your-own")&&"#/series"===viewName&&(viewName="build-your-own:overview"),pathName.includes("build-your-own")&&viewName.includes("series/")&&(viewName="build-your-own:model-variant"),pathName.includes("build-your-own")&&viewName.includes("studio")&&(viewName="build-your-own:"+viewName.split("/")[3]),pathName.includes("inventory")&&viewName.includes("#!")&&(viewName=pathName.substr(1).split(".")[0]+":"+viewName.split("/")[1]),viewName}};var _default=SpaUtils;exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/utils/storage.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _target=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/target.js")),_personalization=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/personalization.js")),_debounce=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/debounce.js"));const Storage={init:()=>{PubSub.subscribe("nav.dealerSet",(0,_debounce.default)((e,{ZipCode})=>{ZipCode&&(Storage.storeConsolidatedValues("consolidatedValues"),Storage.publishUpdate())}),500)},storeConsolidatedValues:()=>{const parsedLocalAttrString=_personalization.default.parseQueryString(localStorage.getItem("attributionString")),sessionAttributionType=sessionStorage.getItem("attributionType");if("directMedia"===sessionAttributionType||"indirectMediaAttribution"===sessionAttributionType){parsedLocalAttrString.maco!==_target.default.getDataLayerMaco().macoCode&&sessionStorage.setItem("attributionType","indirectMediaAttribution"),parsedLocalAttrString.zipChangedMaco=_target.default.getDataLayerMaco().macoCode;const stringfiedAttrString=Storage.serializeQueryString(parsedLocalAttrString);localStorage.setItem("attributionString",stringfiedAttrString),sessionStorage.setItem("attributionString",stringfiedAttrString)}_target.default.isDataLayerMacoAvailable()&&sessionStorage.setItem("consolidatedValues",JSON.stringify({consolidationExperience:"tier 2 regionalization",consolidatedMacoId:_target.default.getDataLayerMaco().macoCode}))},getConsolidatedValues:()=>{let consolidatedValues={};return sessionStorage.getItem("consolidatedValues")&&(consolidatedValues=JSON.parse(sessionStorage.getItem("consolidatedValues"))),consolidatedValues},serializeQueryString:qs=>{let params=[];if(qs){for(let key in qs)params.push(key+"="+qs[key]);return params.join("&")}},publishUpdate:()=>GlobalMessage("personalization.consolidatedValuesUpdate",Storage.getConsolidatedValues())};window.addEventListener("load",()=>{Storage.init()});var _default=Storage;exports.default=_default,module.exports=exports.default},"./frontend_src/bmwlib/utility/personalization/js/utils/target.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const TargetUtils={isTargetEnabled:()=>window.adobe&&adobe.target,isTriggerViewAvailable:window.adobe&&adobe.target&&"function"==typeof adobe.target.triggerView,isDataLayerMacoAvailable:()=>window.BMWdataLayer.user.maco&&window.BMWdataLayer.user.maco,getDataLayerMaco:()=>{let maco={};return TargetUtils.isDataLayerMacoAvailable()&&(maco=window.BMWdataLayer.user.maco),maco}};var _default=TargetUtils;exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/conditions/center-id.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={config:{centersIds:null,subscribe:"dealerUpdate"},toggleContent(centersIds,toggleCallback){this.config.centersIds=centersIds,PubSub.subscribe(this.config.subscribe,(type,data)=>{const{CenterID}=data.dealer;if(CenterID){const notFound=-1===this.config.centersIds.indexOf(CenterID);toggleCallback(notFound)}})}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/conditions/dealer-info.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dealerInfo=__webpack_require__("./frontend_src/bmwlib/api-services/dealer-info.js"),_superagent=_interopRequireDefault(__webpack_require__("./node_modules/superagent/lib/client.js"));var _default={dealerDataInfo:_dealerInfo.DealerInfoApi,config:{subscribe:"dealerUpdate",contentPath:null,toggleCallback:null},hasDealerData:newDealer=>newDealer&&(newDealer.dealer||newDealer.ZipCode),toggleContent(zipCodes,contentPath,toggleCallback){this.config.toggleCallback=toggleCallback,this.config.contentPath=contentPath,this.config.zipCodes=zipCodes,zipCodes.length?(this.useZipCodeList(_dealerInfo.DealerInfoApi.getDealer()),PubSub.subscribe(this.config.subscribe,(type,data)=>{this.useZipCodeList(data.dealer)})):this.useDealerInfo(toggleCallback)},useDealerInfo(toggleCallback){toggleCallback(!this.hasDealerData(_dealerInfo.DealerInfoApi.getDealer())),PubSub.subscribe(this.config.subscribe,(type,data)=>{toggleCallback(!this.hasDealerData(data.dealer))})},useZipCodeList(newDealer){const showContent=this.isZipCodeListed(this.config.zipCodes,newDealer);this.config.contentPath&&showContent?this.requestContent():this.config.toggleCallback(showContent)},isZipCodeListed(zipCodesList,dealer){var _BMWdataLayer,_BMWdataLayer$user;let isListed=!1;const userLocation=(null===(_BMWdataLayer=BMWdataLayer)||void 0===_BMWdataLayer||null===(_BMWdataLayer$user=_BMWdataLayer.user)||void 0===_BMWdataLayer$user?void 0:_BMWdataLayer$user.location)||"";return(-1!==zipCodesList.indexOf(userLocation)||dealer&&dealer.ZipCode&&-1!==zipCodesList.indexOf(dealer.ZipCode))&&(isListed=!0),isListed},requestContent(){this.config.contentPath&&_superagent.default.get(this.config.contentPath+".content.html").then(response=>{response.ok?this.config.toggleCallback(!0,response.text):this.config.toggleCallback(!1)}).catch(error=>{console.warn(`Content toggle error: Error while retrieving content ${this.config.contentPath}: ${error}`)})}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/conditions/maco-experience-fragment.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _superagent=_interopRequireDefault(__webpack_require__("./node_modules/superagent/lib/client.js")),_utility=__webpack_require__("./frontend_src/bmwlib/utility/index.js"),_offers=(_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/personalization-queue.js")),_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/personalization/js/utils/offers.js")));var _default={config:{topic:"personalization.consolidatedValuesUpdate",path:null,maco:"0000",toggleCallback:null},toggleContent(path,toggleCallback){this.config.path=path,this.config.toggleCallback=toggleCallback,this.requestExperienceFragment(this.resolveMaco()),PubSub.subscribe(this.config.topic,(event,{consolidatedMacoId})=>{consolidatedMacoId&&this.requestExperienceFragment(consolidatedMacoId)})},requestExperienceFragment(macoId){this.config.maco===macoId?this.config.toggleCallback(null,macoId):(this.config.maco=macoId,this.makeRequest())},resolveMaco(){const dealer_info=JSON.parse(localStorage.getItem("dealer_info")),queryParams=(0,_utility.GetQueryParams)();let maco="0000";return queryParams.maco?maco=queryParams.maco:dealer_info?maco=dealer_info.maco.Code:document.location.pathname.match(/centers/i)&&(maco=BMWdataLayer.user.attribution.macoCode),maco},makeRequest(){const path=this.config.path+".maco."+this.config.maco+".html",handleMacoResponse=response=>{response.ok?("true"===response.header["bmw-national-response"]&&(this.config.maco="0000"),this.config.toggleCallback(response.text,this.config.maco)):this.config.toggleCallback(null,this.config.maco)};Promise.all([_superagent.default.get(path),_offers.default.getOffersByMacoCode()]).then(responses=>{handleMacoResponse(responses[0]),_offers.default.applyTargetOffer(responses[1])}).catch(error=>{this.config.toggleCallback(null,this.config.maco),console.warn("Error while retrieving MACO offers or getting target offers, "+error)})}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/conditions/na-code.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_panelContainer=_interopRequireDefault(__webpack_require__("./frontend_src/components/panel-container/js/panel-container.js"));var _default=new _component.Component({el:".content-toggle-module > .na-code-condition",name:"Content Toggle - NA Code Condition",subscriptions:{"pdp.ModelUpdate":"toggleContentByNaCode"},init(){this.panelContainer=new _panelContainer.default(this.element.parentElement)},toggleContentByNaCode(e,naCodes){const naCode=naCodes[0];naCode&&this.panelContainer.navigate(naCode)}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/conditions/query-parameters.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _superagent=_interopRequireDefault(__webpack_require__("./node_modules/superagent/lib/client.js")),_angularUtils=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/angular-utils.js")),_component=__webpack_require__("./frontend_src/bmwlib/component.js"),_personalizationInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/personalization-info.js"));var _default={toggle(configuration,container,callback){const version=_personalizationInfo.default.getVersionData(),variantConfig=configuration.filter(config=>config.variationName in version&&version[config.variationName]===config.variationName);variantConfig.length?_superagent.default.get(variantConfig[0].contentPath).then(response=>{response.ok&&(_component.$dom.html(container,response.text,!0),_angularUtils.default.initialize(container),callback&&callback())}):callback&&callback()}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/content-toggle.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_centerId=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/conditions/center-id.js")),_queryParameters=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/conditions/query-parameters.js")),_dealerInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/conditions/dealer-info.js")),_macoExperienceFragment=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/conditions/maco-experience-fragment.js")),_angularUtils=(_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/conditions/na-code.js")),_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/angular-utils.js"))),_personalizationQueue=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/personalization-queue.js")),_isAuthor=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/aem/is-author.js"));var _default=new _component.Component({el:".content-toggle-module",name:"content-toggle Component",toggle:{},init(){const config={displayNoneClass:"display-none"};this.toggle={centersIds:this.useCenterIds.bind(this),queryParams:this.useQueryParameters.bind(this),macoExperienceFragment:this.useMacoExperienceFragment.bind(this),hasZipCode:this.useDealerInfoCheck.bind(this)},config.mode=this.attrs.toggleMode,config.primaryContent=_component.$dom.qs('[data-content="primary"]',this.element),config.secondaryContent=_component.$dom.qs('[data-content="secondary"]',this.element),this.setMode(config)},toggleContent(showPrimary,config){showPrimary?(config.secondaryContent.classList.add(config.displayNoneClass),config.primaryContent.classList.remove(config.displayNoneClass)):(config.secondaryContent.classList.remove(config.displayNoneClass),config.primaryContent.classList.add(config.displayNoneClass))},setMode(config){this.toggle[config.mode]&&this.toggle[config.mode](config)},useQueryParameters(){const configuration=this.attrs.personalizationConfig;configuration&&_queryParameters.default.toggle(JSON.parse(configuration),this.element,()=>this.showHiddenElement())},useCenterIds(config){const self=this,centerIdsAttribute=this.attrs.centersIds;centerIdsAttribute&&_centerId.default.toggleContent(centerIdsAttribute.split(","),showPrimary=>self.toggleContent(showPrimary,config))},useDealerInfoCheck(config){const self=this,zipCodes=this.attrs.zipCodes?this.attrs.zipCodes.split(","):[],contentPath=this.attrs.lazyContent;_dealerInfo.default.toggleContent(zipCodes,contentPath,(showContent,content=null)=>{null!==content&&(_component.$dom.html(config.secondaryContent,content,!0),_angularUtils.default.initialize(content)),self.toggleContent(!showContent,config)})},useMacoExperienceFragment(config){if(!(0,_isAuthor.default)()){const self=this;config.primaryContent.classList.remove(config.displayNoneClass),_macoExperienceFragment.default.toggleContent(this.element.dataset.path,(dynamicMacoXf,maco)=>{if(self.element.dataset.targetingType="maco",self.element.dataset.targetingValue=maco,null!==dynamicMacoXf){const cleanedMacoXf=dynamicMacoXf.replace(/<script[\s\S]*?bmwusa-pubsub[\s\S]*?>[\s\S]*?<\/script>/gm,"");_component.$dom.html(config.primaryContent,cleanedMacoXf,!0)}config.primaryContent.classList.remove("hidden"),_personalizationQueue.default.enqueue(self.element)})}},showHiddenElement(){const hiddenEl=this.element.querySelector(".content-toggle-hidden");hiddenEl&&(hiddenEl.style.cssText="")}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/content-toggle/js/personalization-queue.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;window._personalizationQueue||(window._personalizationQueue=new class EventQueue{constructor(){this.handler=null,this.unprocessedEvents=[]}enqueue(message){this.handler?this.handler(message):this.unprocessedEvents.push(message)}setHandler(fn){this.handler?console.warn("Personalization Queue: Handler already defined."):(this.handler=fn,this.unprocessedEvents.forEach(value=>this.handler(value)),this.unprocessedEvents=[])}});var _default=window._personalizationQueue;exports.default=_default,module.exports=exports.default},"./frontend_src/components/global-messaging/js/global-messaging.js":function(module,exports,__webpack_require__){"use strict";var _component=__webpack_require__("./frontend_src/bmwlib/component.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=new _component.Component({name:"Global Messaging Component",init(){window.GlobalMessage=(event,message)=>{this.relay(event,message)}},relay(event,message){PubSub.publish(event,message);const globalEvent=new CustomEvent(event,{detail:message});window.dispatchEvent(globalEvent)}});exports.default=_default,module.exports=exports.default},"./frontend_src/components/measurement-data/js/datalayer/attribution-info.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pageInfo=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/page-info.js")),_cookies=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/cookies.js")),_getqueryparams=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/getqueryparams.js"));const attributionInfo={init(){const params=(0,_getqueryparams.default)();if(0<Object.keys(params).length&&""!=Object.keys(params)[0]&&(params.cid||params.tier||params.maco||params.ch||params.veh||params.dealerid||params.mybmw||params.modelid||params.payment)){const attributionData=this.createAttributionDataObject(params.cid,params.tier,null,params.maco,null,null,params.ch,params.veh,params.dealerid,params.mybmw,params.modelid,params.payment);this.createAttributionCookie(attributionData)}if(!_cookies.default.has(this.getAttributionCookieName())){const pageData=(0,_pageInfo.default)();if("centers"==pageData.primarySection&&pageData.pageLevel2){const macoHostName=pageData.pageLevel2,attributionData=this.createAttributionDataObject(null,null,null,null,macoHostName,null,null,null);this.createAttributionCookie(attributionData)}else if(window.attribution){const attributionData=this.createAttributionDataObject(null,window.attribution.tier,window.attribution.region,window.attribution.macoCode,null,null,null,null);this.createAttributionCookie(attributionData)}}},createAttributionDataObject:(campaignId,tier,region,macoCode,macoHostName,macoName,channel,vehicle,dealerid,mybmw,modelid,payment)=>({campaignId:campaignId||"",tier:tier||"tier2",region:region||"",macoCode:macoCode||"",macoHostName:macoHostName||"",macoName:macoName||"",channel:channel||"",vehicle:vehicle||"",dealerid:dealerid||"",mybmw:mybmw||"",modelid:modelid||"",payment:payment||""}),getAttributionCookieName:()=>"attribution",getMacoData(keyType,key){let macoData=!1;if(keyType&&key){const baseApiUrl=window.marketingApiUrl;let url=`${baseApiUrl}/macos/${key}`;"macoHostName"===keyType&&(url=`${baseApiUrl}/macos/macoHostName/${key}`);const xhr=new XMLHttpRequest;xhr.open("GET",url,!1),xhr.send(null),200===xhr.status?macoData=JSON.parse(xhr.responseText):console.error("Error requesting maco data",keyType,key,xhr.statusText)}return macoData},completeMacoData(attributionData){if(attributionData){let macoData=!1;if(attributionData.macoHostName)macoData=this.getMacoData("macoHostName",attributionData.macoHostName);else if(attributionData.macoCode){let macoCode=attributionData.macoCode;"national"===macoCode&&(macoCode="0000"),macoData=this.getMacoData("macoCode",macoCode)}macoData&&"national"!==macoData.macoCode&&"0000"!==macoData.macoCode&&(attributionData.region=macoData.region,attributionData.macoCode=macoData.macoCode,attributionData.macoHostName=macoData.macoHostName,attributionData.macoName=macoData.macoDisplay,attributionData.macoUrl=macoData.macoUrl,attributionData.macoDisplay=macoData.macoName)}return attributionData},createAttributionCookie(attributionData){attributionData&&((attributionData.macoCode||attributionData.macoHostName)&&(attributionData=this.completeMacoData(attributionData)),_cookies.default.set(this.getAttributionCookieName(),JSON.stringify(attributionData),null,"/"))},getAttributionData(){const attributionCookie=_cookies.default.get(this.getAttributionCookieName());if(attributionCookie){return JSON.parse(attributionCookie)}return!1}};attributionInfo.init();var _default=attributionInfo;exports.default=_default,module.exports=exports.default},"./frontend_src/components/measurement-data/js/datalayer/page-info.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _pageUtil=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/utility/page-util.js")),_psl=_interopRequireDefault(__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/utility/psl.js"));var _default=()=>{const domainInfo=_psl.default.parse(document.location.hostname),trimHash=document.location.hash.split("?")[0].replace(/#|!/g,"").replace(/^\//g,"").split("/").slice(0,2).join("/"),trimPath=[document.location.pathname.replace(/\.html|\/content\/bmwusa/g,"").slice(1),trimHash].filter(Boolean).join("/"),domainCountry=_pageUtil.default.domainCountry(domainInfo.sld||domainInfo.input||""),pageInfo={name:[domainCountry,trimPath.replace(/-/g,"")].filter(Boolean).join("/").replace(/\//g,":"),title:document.title,url:document.URL,urlNoParams:document.location.origin+document.location.pathname,subdomain:domainInfo.subdomain||"",baseDomain:domainInfo.domain||"",TLD:domainInfo.tld||"",path:document.location.pathname,primarySection:_pageUtil.default.pageLevel(trimPath,0)||"",pageLevel2:_pageUtil.default.pageLevel(trimPath,1)||"",pageLevel3:_pageUtil.default.pageLevel(trimPath,2)||"",pageLevel4:_pageUtil.default.pageLevel(trimPath,3)||"",pageHier:[_pageUtil.default.pageLevel(trimPath,0),_pageUtil.default.pageLevel(trimPath,1),_pageUtil.default.pageLevel(trimPath,2),_pageUtil.default.pageLevel(trimPath,3)].filter(Boolean).join(" / ")};if(pageInfo.pageHier&&"home"!=pageInfo.pageHier||(pageInfo.name=domainCountry+":homepage",pageInfo.primarySection="homepage"),window.self!==window.top){const parentDomainInfo=_psl.default.parse(document.referrer.split("/")[2]||document.location.hostname),replaceStr=parentDomainInfo.sld?parentDomainInfo.sld:parentDomainInfo.input;pageInfo.name=[replaceStr+"|iframe",trimPath.replace(/-/g,"").replace(".iframe","")].filter(Boolean).join("/").replace(/\//g,":")}return pageInfo};exports.default=_default,module.exports=exports.default},"./frontend_src/components/measurement-data/js/datalayer/personalization-info.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dom=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/dom/index.js")),_domLoaded=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/dom-loaded.js")),_personalizationQueue=_interopRequireDefault(__webpack_require__("./frontend_src/components/content-toggle/js/personalization-queue.js"));const personalizationInfo={version:{},queryParams:location.search.split(/[?&]/),getVersionData(){return BMWdataLayer.personalization.version||this.setVersionData(),BMWdataLayer.personalization.version},findMacoAnalytics(){0!==Object.keys(this.version).length&&(BMWdataLayer.personalization.version=this.version),_personalizationQueue.default.setHandler(element=>{const marketingArea=element.dataset.marketingArea,creativeName=element.dataset.creativeName,targetType=element.dataset.targetingType,targetValue=element.dataset.targetingValue,joinToAnalyticsString=areas=>("string"==typeof areas&&(areas=[areas]),areas.join(";")+"|"+creativeName+"|"+targetType+"|"+targetValue),joinableAnalyticsString=creativeName+"|"+targetType+"|"+targetValue,fullAnalyticsString=joinToAnalyticsString(marketingArea);if(void 0===BMWdataLayer.personalization.version)BMWdataLayer.personalization.version=fullAnalyticsString;else if("string"==typeof BMWdataLayer.personalization.version)if(BMWdataLayer.personalization.version.endsWith(joinableAnalyticsString)){const areas=BMWdataLayer.personalization.version.split("|")[0].split(";");-1===areas.indexOf(marketingArea)&&(areas.push(marketingArea),BMWdataLayer.personalization.version=joinToAnalyticsString(areas))}else BMWdataLayer.personalization.version=[BMWdataLayer.personalization.version,fullAnalyticsString];else if(BMWdataLayer.personalization.version instanceof Array){let found=!1;for(let i=0;i<BMWdataLayer.personalization.version.length;i++){const value=BMWdataLayer.personalization.version[i];if("string"==typeof value&&value.endsWith(joinableAnalyticsString)){const areas=value.split("|")[0].split(";");if(-1===areas.indexOf(marketingArea)){areas.push(marketingArea),BMWdataLayer.personalization.version[i]=joinToAnalyticsString(areas),found=!0;break}}}found||BMWdataLayer.personalization.version.push(fullAnalyticsString)}else BMWdataLayer.personalization.version=[BMWdataLayer.personalization.version,fullAnalyticsString]})},setVersionData(){_dom.default.qsa("[data-personalization-config]").forEach(target=>{let configuration=_dom.default.data(target,"personalizationConfig");if(configuration&&(configuration=JSON.parse(configuration),configuration.length)){const section=configuration[0].variationName;this.version[section]="default",configuration.forEach(config=>{this.isQueryParameterListMatching(config.parameters)&&(this.version[section]=config.variationName)})}}),this.findMacoAnalytics()},isQueryParameterListMatching(parameters){let parametersFound=0;return parameters.forEach(parameter=>{-1<this.queryParams.indexOf(parameter)&&parametersFound++}),parameters.length===parametersFound}};_domLoaded.default.then(()=>personalizationInfo.getVersionData());var _default=personalizationInfo;exports.default=_default,module.exports=exports.default},"./frontend_src/components/measurement-data/js/datalayer/utility/data/rules.json":function(module){module.exports=JSON.parse('["net","com","edu","org","gov","br","de","in","ca","mx"]')},"./frontend_src/components/measurement-data/js/datalayer/utility/page-util.js":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={pageLevel(pathName,level){const split=pathName.split("/")[level];if(split){return-1<pathName.indexOf("vehicles")&&0<level?this.formatProductName(split):split.replace(/-/g," ")}return split},formatProductName(fullName){const split=fullName.split("-");for(const key in split)"iperformance"==split[key]?split[key]="iPerformance":0!=split[key].indexOf("i")&&(split[key]=split[key].charAt(0).toUpperCase()+split[key].replace(/bmw/g,"BMW").slice(1));return split.join(" ")},domainCountry(domain){const domainCodes={bmwusa:"bmwusa",bmwusacm:"bmwusa",localhost:"lh"};return domainCodes.hasOwnProperty(domain)?domainCodes[domain]:domain}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/measurement-data/js/datalayer/utility/psl.js":function(module,exports,__webpack_require__){"use strict";var Punycode=__webpack_require__("./node_modules/node-libs-browser/node_modules/punycode/punycode.js"),internals={};internals.rules=__webpack_require__("./frontend_src/components/measurement-data/js/datalayer/utility/data/rules.json").map((function(rule){return{rule,suffix:rule.replace(/^(\*\.|\!)/,""),punySuffix:-1,wildcard:"*"===rule.charAt(0),exception:"!"===rule.charAt(0)}})),internals.endsWith=function(str,suffix){return-1!==str.indexOf(suffix,str.length-suffix.length)},internals.findRule=function(domain){var punyDomain=Punycode.toASCII(domain);return internals.rules.reduce((function(memo,rule){return-1===rule.punySuffix&&(rule.punySuffix=Punycode.toASCII(rule.suffix)),internals.endsWith(punyDomain,"."+rule.punySuffix)||punyDomain===rule.punySuffix?rule:memo}),null)},exports.errorCodes={DOMAIN_TOO_SHORT:"Domain name too short.",DOMAIN_TOO_LONG:"Domain name too long. It should be no more than 255 chars.",LABEL_STARTS_WITH_DASH:"Domain name label can not start with a dash.",LABEL_ENDS_WITH_DASH:"Domain name label can not end with a dash.",LABEL_TOO_LONG:"Domain name label should be at most 63 chars long.",LABEL_TOO_SHORT:"Domain name label should be at least 1 character long.",LABEL_INVALID_CHARS:"Domain name label can only contain alphanumeric characters or dashes."},internals.validate=function(input){var ascii=Punycode.toASCII(input);if(1>ascii.length)return"DOMAIN_TOO_SHORT";if(255<ascii.length)return"DOMAIN_TOO_LONG";for(var label,labels=ascii.split("."),i=0;i<labels.length;++i){if(!(label=labels[i]).length)return"LABEL_TOO_SHORT";if(63<label.length)return"LABEL_TOO_LONG";if("-"===label.charAt(0))return"LABEL_STARTS_WITH_DASH";if("-"===label.charAt(label.length-1))return"LABEL_ENDS_WITH_DASH";if(!/^[a-z0-9\-]+$/.test(label))return"LABEL_INVALID_CHARS"}},exports.parse=function(input){if("string"!=typeof input)throw new TypeError("Domain name must be a string.");var domain=input.slice(0).toLowerCase();"."===domain.charAt(domain.length-1)&&(domain=domain.slice(0,domain.length-1));var error=internals.validate(domain);if(error)return{input,error:{message:exports.errorCodes[error],code:error}};var parsed={input,tld:null,sld:null,domain:null,subdomain:null,listed:!1},domainParts=domain.split(".");if("local"===domainParts[domainParts.length-1])return parsed;var handlePunycode=function(){return/xn--/.test(domain)?(parsed.domain&&(parsed.domain=Punycode.toASCII(parsed.domain)),parsed.subdomain&&(parsed.subdomain=Punycode.toASCII(parsed.subdomain)),parsed):parsed},rule=internals.findRule(domain);if(!rule)return 2>domainParts.length?parsed:(parsed.tld=domainParts.pop(),parsed.sld=domainParts.pop(),parsed.domain=[parsed.sld,parsed.tld].join("."),domainParts.length&&(parsed.subdomain=domainParts.pop()),handlePunycode());parsed.listed=!0;var tldParts=rule.suffix.split("."),privateParts=domainParts.slice(0,domainParts.length-tldParts.length);return rule.exception&&privateParts.push(tldParts.shift()),parsed.tld=tldParts.join("."),privateParts.length?(rule.wildcard&&(tldParts.unshift(privateParts.pop()),parsed.tld=tldParts.join(".")),privateParts.length?(parsed.sld=privateParts.pop(),parsed.domain=[parsed.sld,parsed.tld].join("."),privateParts.length&&(parsed.subdomain=privateParts.join(".")),handlePunycode()):handlePunycode()):handlePunycode()},exports.get=function(domain){return domain&&exports.parse(domain).domain||null},exports.isValid=function(domain){var parsed=exports.parse(domain);return!(!parsed.domain||!parsed.listed)}},"./frontend_src/components/panel-container-tabs/js/panel-container-tabs.js":function(module,exports,__webpack_require__){"use strict";var _component=__webpack_require__("./frontend_src/bmwlib/component.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=class PanelContainerTabs{constructor(component){if(component){const tabs=Array.from(_component.$dom.qsa(".tabsContainer__tab",component));tabs&&(this._tabs=tabs.map(tab=>({id:tab.dataset.tabId,tab})))}}navigate(id){const selectedTab=this.getSelectedTab(),newTab=this.getTabById(id);selectedTab&&newTab&&_component.$dom.removeClass(selectedTab.tab,"tabsContainer__tab--active"),newTab&&_component.$dom.addClass(newTab.tab,"tabsContainer__tab--active")}getSelectedTab(){return this._tabs.find(tab=>tab.tab.classList.contains("tabsContainer__tab--active"))}getTabById(id){return this._tabs.find(tab=>tab.id===id)}};exports.default=_default,module.exports=exports.default},"./frontend_src/components/panel-container/js/panel-container.js":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _component=__webpack_require__("./frontend_src/bmwlib/component.js"),_isAuthor=_interopRequireDefault(__webpack_require__("./frontend_src/bmwlib/utility/aem/is-author.js")),_panelContainerTabs=_interopRequireDefault(__webpack_require__("./frontend_src/components/panel-container-tabs/js/panel-container-tabs.js"));var _default=class PanelContainer{constructor(component){if(component){this._panelName=component.dataset.panelcontainer,this._context=component;const panels=Array.from(_component.$dom.qsa(".panelContainer__panel",component)),tabs=_component.$dom.qs(".tabsContainer",component);this._panelName&&panels&&(this._panels=panels.map(panel=>({id:panel.dataset.panelId,panel})),tabs&&(this._tabList=new _panelContainerTabs.default(component)),this._panels.length&&this.showPanel(this._panels[0].id),(0,_isAuthor.default)()&&this._subscribeEditorAction())}}navigate(id){const selectedPanel=this.getSelectedPanel();selectedPanel&&this.hidePanel(selectedPanel.id),this.showPanel(id)}showPanel(id){const panel=this.getPanelById(id);panel&&panel.panel&&_component.$dom.addClass(panel.panel,"panelContainer__panel--active"),this._tabList&&this._tabList.navigate(id)}hidePanel(id){const panel=this.getPanelById(id);panel&&panel.panel&&_component.$dom.removeClass(panel.panel,"panelContainer__panel--active")}getSelectedPanel(){return this._panels.find(panel=>panel.panel.classList.contains("panelContainer__panel--active"))}onEditorNavigate(fn){this._editorNavigateCallback=fn}getPanelById(id){return this._panels.find(panel=>panel.id===id)}_handleEditorNavigate(message){if(message.data&&message.data.type===this._panelName&&message.data.id===this._context.dataset.cmpPanelcontainerId){const newActivePanel=this._panels[message.data.index];"navigate"===message.data.operation&&newActivePanel&&(this.navigate(newActivePanel.id),"function"==typeof this._editorNavigateCallback&&this._editorNavigateCallback())}}_subscribeEditorAction(){new Granite.author.MessageChannel("cqauthor",window).subscribeRequestMessage("cmp.panelcontainer",message=>{this._handleEditorNavigate(message)})}};exports.default=_default,module.exports=exports.default},"./node_modules/node-libs-browser/node_modules/punycode/punycode.js":function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(root){exports&&exports.nodeType,module&&module.nodeType;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self;var punycode,maxInt=2147483647,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return parts.length>1&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,(function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)})).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72;for((basic=input.lastIndexOf("-"))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;index>=inputLength&&error("invalid-input"),((digit=(codePoint=input.charCodeAt(index++))-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:36)>=36||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)w>floor(maxInt/(baseMinusT=36-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=36;!(q<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode,encode,toASCII:function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))},toUnicode:function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module),__webpack_require__("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/module.js":function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},16:function(module,exports,__webpack_require__){module.exports=__webpack_require__("./frontend_src/components/content-toggle/js/content-toggle.js")}});
//# sourceMappingURL=/etc/designs/bmwusa/bmwusa-clientlibs/bmwusa-sourcemaps/bmwusa-content-toggle-203902800b3faaf5f071.js.map